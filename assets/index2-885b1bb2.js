import{c as Ft,u as It,v as at,D as lt,k,P as Vt,l as Et,m as $t,n as Ut,H as Ot,S as Rt,U as Wt,j as q,Q as Tt,p as zt,w as Gt,N as jt,V as Yt,a as Xt,b as Ct,T as Pt,R as wt,x as Jt,y as Nt,W as Kt,z as Zt,O as Qt,E as xt,G as ft,I as qt,J as ot,K as dt,i as te,X as ee}from"./location-0716c822.js";import{G as yt}from"./GLTFLoader-31769430.js";import{R as ie}from"./Reflector-fe93a057.js";/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class T{constructor(t,i,s,y,_="div"){this.parent=t,this.object=i,this.property=s,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(y),this.$name=document.createElement("div"),this.$name.classList.add("name"),T.nextNameID=T.nextNameID||0,this.$name.id="lil-gui-name-"+ ++T.nextNameID,this.$widget=document.createElement(_),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(s)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const i=this.parent.add(this.object,this.property,t);return i.name(this._name),this.destroy(),i}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class ne extends T{constructor(t,i,s){super(t,i,s,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function At(v){let t,i;return(t=v.match(/(#|0x)?([a-f0-9]{6})/i))?i=t[2]:(t=v.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?i=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=v.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!i&&"#"+i}const se={isPrimitive:!0,match:v=>typeof v=="string",fromHexString:At,toHexString:At},rt={isPrimitive:!0,match:v=>typeof v=="number",fromHexString:v=>parseInt(v.substring(1),16),toHexString:v=>"#"+v.toString(16).padStart(6,0)},re={isPrimitive:!1,match:Array.isArray,fromHexString(v,t,i=1){const s=rt.fromHexString(v);t[0]=(s>>16&255)/255*i,t[1]=(s>>8&255)/255*i,t[2]=(255&s)/255*i},toHexString:([v,t,i],s=1)=>rt.toHexString(v*(s=255/s)<<16^t*s<<8^i*s<<0)},ae={isPrimitive:!1,match:v=>Object(v)===v,fromHexString(v,t,i=1){const s=rt.fromHexString(v);t.r=(s>>16&255)/255*i,t.g=(s>>8&255)/255*i,t.b=(255&s)/255*i},toHexString:({r:v,g:t,b:i},s=1)=>rt.toHexString(v*(s=255/s)<<16^t*s<<8^i*s<<0)},le=[se,rt,re,ae];class oe extends T{constructor(t,i,s,y){var _;super(t,i,s,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(_=this.initialValue,le.find(p=>p.match(_))),this._rgbScale=y,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const p=At(this.$text.value);p&&this._setValueFromHexString(p)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const i=this._format.fromHexString(t);this.setValue(i)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class mt extends T{constructor(t,i,s){super(t,i,s,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",y=>{y.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class de extends T{constructor(t,i,s,y,_,p){super(t,i,s,"number"),this._initInput(),this.min(y),this.max(_);const n=p!==void 0;this.step(n?p:this._getImplicitStep(),n),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,i=!0){return this._step=t,this._stepExplicit=i,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let i=(t-this._min)/(this._max-this._min);i=Math.max(0,Math.min(i,1)),this.$fill.style.width=100*i+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=h=>{const w=parseFloat(this.$input.value);isNaN(w)||(this._snapClampSetValue(w+h),this.$input.value=this.getValue())};let i,s,y,_,p,n=!1;const A=h=>{if(n){const w=h.clientX-i,b=h.clientY-s;Math.abs(b)>5?(h.preventDefault(),this.$input.blur(),n=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(w)>5&&$()}if(!n){const w=h.clientY-y;p-=w*this._step*this._arrowKeyMultiplier(h),_+p>this._max?p=this._max-_:_+p<this._min&&(p=this._min-_),this._snapClampSetValue(_+p)}y=h.clientY},$=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",$)};this.$input.addEventListener("input",()=>{let h=parseFloat(this.$input.value);isNaN(h)||(this._stepExplicit&&(h=this._snap(h)),this.setValue(this._clamp(h)))}),this.$input.addEventListener("keydown",h=>{h.code==="Enter"&&this.$input.blur(),h.code==="ArrowUp"&&(h.preventDefault(),t(this._step*this._arrowKeyMultiplier(h))),h.code==="ArrowDown"&&(h.preventDefault(),t(this._step*this._arrowKeyMultiplier(h)*-1))}),this.$input.addEventListener("wheel",h=>{this._inputFocused&&(h.preventDefault(),t(this._step*this._normalizeMouseWheel(h)))},{passive:!1}),this.$input.addEventListener("mousedown",h=>{i=h.clientX,s=y=h.clientY,n=!0,_=this.getValue(),p=0,window.addEventListener("mousemove",A),window.addEventListener("mouseup",$)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=b=>{const C=this.$slider.getBoundingClientRect();let V=(z=b,G=C.left,Z=C.right,r=this._min,e=this._max,(z-G)/(Z-G)*(e-r)+r);var z,G,Z,r,e;this._snapClampSetValue(V)},i=b=>{t(b.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)};let y,_,p=!1;const n=b=>{b.preventDefault(),this._setDraggingStyle(!0),t(b.touches[0].clientX),p=!1},A=b=>{if(p){const C=b.touches[0].clientX-y,V=b.touches[0].clientY-_;Math.abs(C)>Math.abs(V)?n(b):(window.removeEventListener("touchmove",A),window.removeEventListener("touchend",$))}else b.preventDefault(),t(b.touches[0].clientX)},$=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",$)},h=this._callOnFinishChange.bind(this);let w;this.$slider.addEventListener("mousedown",b=>{this._setDraggingStyle(!0),t(b.clientX),window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)}),this.$slider.addEventListener("touchstart",b=>{b.touches.length>1||(this._hasScrollBar?(y=b.touches[0].clientX,_=b.touches[0].clientY,p=!0):n(b),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",$))},{passive:!1}),this.$slider.addEventListener("wheel",b=>{if(Math.abs(b.deltaX)<Math.abs(b.deltaY)&&this._hasScrollBar)return;b.preventDefault();const C=this._normalizeMouseWheel(b)*this._step;this._snapClampSetValue(this.getValue()+C),this.$input.value=this.getValue(),clearTimeout(w),w=setTimeout(h,400)},{passive:!1})}_setDraggingStyle(t,i="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle("lil-gui-"+i,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:i,deltaY:s}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(i=0,s=-t.wheelDelta/120,s*=this._stepExplicit?1:10),i+-s}_arrowKeyMultiplier(t){let i=this._stepExplicit?1:10;return t.shiftKey?i*=10:t.altKey&&(i/=10),i}_snap(t){const i=Math.round(t/this._step)*this._step;return parseFloat(i.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class he extends T{constructor(t,i,s,y){super(t,i,s,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(y)?y:Object.values(y),this._names=Array.isArray(y)?y:Object.keys(y),this._names.forEach(_=>{const p=document.createElement("option");p.innerHTML=_,this.$select.appendChild(p)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const t=this.getValue(),i=this._values.indexOf(t);return this.$select.selectedIndex=i,this.$display.innerHTML=i===-1?t:this._names[i],this}}class ce extends T{constructor(t,i,s){super(t,i,s,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",y=>{y.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let Mt=!1;class _t{constructor({parent:t,autoPlace:i=t===void 0,container:s,width:y,title:_="Controls",injectStyles:p=!0,touchStyles:n=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",A=>{A.code!=="Enter"&&A.code!=="Space"||(A.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(_),n&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!Mt&&p&&(function(A){const $=document.createElement("style");$.innerHTML=A;const h=document.querySelector("head link[rel=stylesheet], head style");h?document.head.insertBefore($,h):document.head.appendChild($)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"↕";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"▾";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"▸"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"✓";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),Mt=!0),s?s.appendChild(this.domElement):i&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),y&&this.domElement.style.setProperty("--width",y+"px"),this.domElement.addEventListener("keydown",A=>A.stopPropagation()),this.domElement.addEventListener("keyup",A=>A.stopPropagation())}add(t,i,s,y,_){if(Object(s)===s)return new he(this,t,i,s);const p=t[i];switch(typeof p){case"number":return new de(this,t,i,s,y,_);case"boolean":return new ne(this,t,i);case"string":return new ce(this,t,i);case"function":return new mt(this,t,i)}console.error(`gui.add failed
	property:`,i,`
	object:`,t,`
	value:`,p)}addColor(t,i,s=1){return new oe(this,t,i,s)}addFolder(t){return new _t({parent:this,title:t})}load(t,i=!0){return t.controllers&&this.controllers.forEach(s=>{s instanceof mt||s._name in t.controllers&&s.load(t.controllers[s._name])}),i&&t.folders&&this.folders.forEach(s=>{s._title in t.folders&&s.load(t.folders[s._title])}),this}save(t=!0){const i={controllers:{},folders:{}};return this.controllers.forEach(s=>{if(!(s instanceof mt)){if(s._name in i.controllers)throw new Error(`Cannot save GUI with duplicate property "${s._name}"`);i.controllers[s._name]=s.save()}}),t&&this.folders.forEach(s=>{if(s._title in i.folders)throw new Error(`Cannot save GUI with duplicate folder "${s._title}"`);i.folders[s._title]=s.save()}),i}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const i=this.$children.clientHeight;this.$children.style.height=i+"px",this.domElement.classList.add("transition");const s=_=>{_.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",s))};this.$children.addEventListener("transitionend",s);const y=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=y+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(i=>{t=t.concat(i.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(i=>{t=t.concat(i.foldersRecursive())}),t}}class ue extends Ft{constructor(t,i,s=!1,y=!1,_=1e4){const p=new It;super(p,i),this.isMarchingCubes=!0;const n=this,A=new Float32Array(12*3),$=new Float32Array(12*3),h=new Float32Array(12*3);this.enableUvs=s,this.enableColors=y,this.init=function(r){this.resolution=r,this.isolation=80,this.size=r,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const e=_*3;this.positionArray=new Float32Array(e*3);const l=new at(this.positionArray,3);l.setUsage(lt),p.setAttribute("position",l),this.normalArray=new Float32Array(e*3);const o=new at(this.normalArray,3);if(o.setUsage(lt),p.setAttribute("normal",o),this.enableUvs){this.uvArray=new Float32Array(e*2);const d=new at(this.uvArray,2);d.setUsage(lt),p.setAttribute("uv",d)}if(this.enableColors){this.colorArray=new Float32Array(e*3);const d=new at(this.colorArray,3);d.setUsage(lt),p.setAttribute("color",d)}};function w(r,e,l){return r+(e-r)*l}function b(r,e,l,o,d,c,a,u,g,f){const x=(l-a)/(u-a),m=n.normal_cache;A[e+0]=o+x*n.delta,A[e+1]=d,A[e+2]=c,$[e+0]=w(m[r+0],m[r+3],x),$[e+1]=w(m[r+1],m[r+4],x),$[e+2]=w(m[r+2],m[r+5],x),h[e+0]=w(n.palette[g*3+0],n.palette[f*3+0],x),h[e+1]=w(n.palette[g*3+1],n.palette[f*3+1],x),h[e+2]=w(n.palette[g*3+2],n.palette[f*3+2],x)}function C(r,e,l,o,d,c,a,u,g,f){const x=(l-a)/(u-a),m=n.normal_cache;A[e+0]=o,A[e+1]=d+x*n.delta,A[e+2]=c;const E=r+n.yd*3;$[e+0]=w(m[r+0],m[E+0],x),$[e+1]=w(m[r+1],m[E+1],x),$[e+2]=w(m[r+2],m[E+2],x),h[e+0]=w(n.palette[g*3+0],n.palette[f*3+0],x),h[e+1]=w(n.palette[g*3+1],n.palette[f*3+1],x),h[e+2]=w(n.palette[g*3+2],n.palette[f*3+2],x)}function V(r,e,l,o,d,c,a,u,g,f){const x=(l-a)/(u-a),m=n.normal_cache;A[e+0]=o,A[e+1]=d,A[e+2]=c+x*n.delta;const E=r+n.zd*3;$[e+0]=w(m[r+0],m[E+0],x),$[e+1]=w(m[r+1],m[E+1],x),$[e+2]=w(m[r+2],m[E+2],x),h[e+0]=w(n.palette[g*3+0],n.palette[f*3+0],x),h[e+1]=w(n.palette[g*3+1],n.palette[f*3+1],x),h[e+2]=w(n.palette[g*3+2],n.palette[f*3+2],x)}function z(r){const e=r*3;n.normal_cache[e]===0&&(n.normal_cache[e+0]=n.field[r-1]-n.field[r+1],n.normal_cache[e+1]=n.field[r-n.yd]-n.field[r+n.yd],n.normal_cache[e+2]=n.field[r-n.zd]-n.field[r+n.zd])}function G(r,e,l,o,d){const c=o+1,a=o+n.yd,u=o+n.zd,g=c+n.yd,f=c+n.zd,x=o+n.yd+n.zd,m=c+n.yd+n.zd;let E=0;const M=n.field[o],L=n.field[c],H=n.field[a],B=n.field[g],U=n.field[u],O=n.field[f],D=n.field[x],I=n.field[m];M<d&&(E|=1),L<d&&(E|=2),H<d&&(E|=8),B<d&&(E|=4),U<d&&(E|=16),O<d&&(E|=32),D<d&&(E|=128),I<d&&(E|=64);const S=pe[E];if(S===0)return 0;const j=n.delta,Q=r+j,X=e+j,J=l+j;S&1&&(z(o),z(c),b(o*3,0,d,r,e,l,M,L,o,c)),S&2&&(z(c),z(g),C(c*3,3,d,Q,e,l,L,B,c,g)),S&4&&(z(a),z(g),b(a*3,6,d,r,X,l,H,B,a,g)),S&8&&(z(o),z(a),C(o*3,9,d,r,e,l,M,H,o,a)),S&16&&(z(u),z(f),b(u*3,12,d,r,e,J,U,O,u,f)),S&32&&(z(f),z(m),C(f*3,15,d,Q,e,J,O,I,f,m)),S&64&&(z(x),z(m),b(x*3,18,d,r,X,J,D,I,x,m)),S&128&&(z(u),z(x),C(u*3,21,d,r,e,J,U,D,u,x)),S&256&&(z(o),z(u),V(o*3,24,d,r,e,l,M,U,o,u)),S&512&&(z(c),z(f),V(c*3,27,d,Q,e,l,L,O,c,f)),S&1024&&(z(g),z(m),V(g*3,30,d,Q,X,l,B,I,g,m)),S&2048&&(z(a),z(x),V(a*3,33,d,r,X,l,H,D,a,x)),E<<=4;let N,it,nt,et=0,R=0;for(;ht[E+R]!=-1;)N=E+R,it=N+1,nt=N+2,Z(A,$,h,3*ht[N],3*ht[it],3*ht[nt]),R+=3,et++;return et}function Z(r,e,l,o,d,c){const a=n.count*3;if(n.positionArray[a+0]=r[o],n.positionArray[a+1]=r[o+1],n.positionArray[a+2]=r[o+2],n.positionArray[a+3]=r[d],n.positionArray[a+4]=r[d+1],n.positionArray[a+5]=r[d+2],n.positionArray[a+6]=r[c],n.positionArray[a+7]=r[c+1],n.positionArray[a+8]=r[c+2],n.material.flatShading===!0){const u=(e[o+0]+e[d+0]+e[c+0])/3,g=(e[o+1]+e[d+1]+e[c+1])/3,f=(e[o+2]+e[d+2]+e[c+2])/3;n.normalArray[a+0]=u,n.normalArray[a+1]=g,n.normalArray[a+2]=f,n.normalArray[a+3]=u,n.normalArray[a+4]=g,n.normalArray[a+5]=f,n.normalArray[a+6]=u,n.normalArray[a+7]=g,n.normalArray[a+8]=f}else n.normalArray[a+0]=e[o+0],n.normalArray[a+1]=e[o+1],n.normalArray[a+2]=e[o+2],n.normalArray[a+3]=e[d+0],n.normalArray[a+4]=e[d+1],n.normalArray[a+5]=e[d+2],n.normalArray[a+6]=e[c+0],n.normalArray[a+7]=e[c+1],n.normalArray[a+8]=e[c+2];if(n.enableUvs){const u=n.count*2;n.uvArray[u+0]=r[o+0],n.uvArray[u+1]=r[o+2],n.uvArray[u+2]=r[d+0],n.uvArray[u+3]=r[d+2],n.uvArray[u+4]=r[c+0],n.uvArray[u+5]=r[c+2]}n.enableColors&&(n.colorArray[a+0]=l[o+0],n.colorArray[a+1]=l[o+1],n.colorArray[a+2]=l[o+2],n.colorArray[a+3]=l[d+0],n.colorArray[a+4]=l[d+1],n.colorArray[a+5]=l[d+2],n.colorArray[a+6]=l[c+0],n.colorArray[a+7]=l[c+1],n.colorArray[a+8]=l[c+2]),n.count+=3}this.addBall=function(r,e,l,o,d,c){const a=Math.sign(o);o=Math.abs(o);const u=c!=null;let g=new k(r,e,l);if(u)try{g=c instanceof k?c:Array.isArray(c)?new k(Math.min(Math.abs(c[0]),1),Math.min(Math.abs(c[1]),1),Math.min(Math.abs(c[2]),1)):new k(c)}catch{g=new k(r,e,l)}const f=this.size*Math.sqrt(o/d),x=l*this.size,m=e*this.size,E=r*this.size;let M=Math.floor(x-f);M<1&&(M=1);let L=Math.floor(x+f);L>this.size-1&&(L=this.size-1);let H=Math.floor(m-f);H<1&&(H=1);let B=Math.floor(m+f);B>this.size-1&&(B=this.size-1);let U=Math.floor(E-f);U<1&&(U=1);let O=Math.floor(E+f);O>this.size-1&&(O=this.size-1);let D,I,S,j,Q,X,J,N,it,nt,et;for(S=M;S<L;S++)for(Q=this.size2*S,N=S/this.size-l,it=N*N,I=H;I<B;I++)for(j=Q+this.size*I,J=I/this.size-e,nt=J*J,D=U;D<O;D++)if(X=D/this.size-r,et=o/(1e-6+X*X+nt+it)-d,et>0){this.field[j+D]+=et*a;const R=Math.sqrt((D-E)*(D-E)+(I-m)*(I-m)+(S-x)*(S-x))/f,gt=1-R*R*R*(R*(R*6-15)+10);this.palette[(j+D)*3+0]+=g.r*gt,this.palette[(j+D)*3+1]+=g.g*gt,this.palette[(j+D)*3+2]+=g.b*gt}},this.addPlaneX=function(r,e){const l=this.size,o=this.yd,d=this.zd,c=this.field;let a,u,g,f,x,m,E,M=l*Math.sqrt(r/e);for(M>l&&(M=l),a=0;a<M;a++)if(m=a/l,f=m*m,x=r/(1e-4+f)-e,x>0)for(u=0;u<l;u++)for(E=a+u*o,g=0;g<l;g++)c[d*g+E]+=x},this.addPlaneY=function(r,e){const l=this.size,o=this.yd,d=this.zd,c=this.field;let a,u,g,f,x,m,E,M,L=l*Math.sqrt(r/e);for(L>l&&(L=l),u=0;u<L;u++)if(m=u/l,f=m*m,x=r/(1e-4+f)-e,x>0)for(E=u*o,a=0;a<l;a++)for(M=E+a,g=0;g<l;g++)c[d*g+M]+=x},this.addPlaneZ=function(r,e){const l=this.size,o=this.yd,d=this.zd,c=this.field;let a,u,g,f,x,m,E,M,L=l*Math.sqrt(r/e);for(L>l&&(L=l),g=0;g<L;g++)if(m=g/l,f=m*m,x=r/(1e-4+f)-e,x>0)for(E=d*g,u=0;u<l;u++)for(M=E+u*o,a=0;a<l;a++)c[M+a]+=x},this.setCell=function(r,e,l,o){const d=this.size2*l+this.size*e+r;this.field[d]=o},this.getCell=function(r,e,l){const o=this.size2*l+this.size*e+r;return this.field[o]},this.blur=function(r=1){const e=this.field,l=e.slice(),o=this.size,d=this.size2;for(let c=0;c<o;c++)for(let a=0;a<o;a++)for(let u=0;u<o;u++){const g=d*u+o*a+c;let f=l[g],x=1;for(let m=-1;m<=1;m+=2){const E=m+c;if(!(E<0||E>=o))for(let M=-1;M<=1;M+=2){const L=M+a;if(!(L<0||L>=o))for(let H=-1;H<=1;H+=2){const B=H+u;if(B<0||B>=o)continue;const U=d*B+o*L+E,O=l[U];x++,f+=r*(O-f)/x}}}e[g]=f}},this.reset=function(){for(let r=0;r<this.size3;r++)this.normal_cache[r*3]=0,this.field[r]=0,this.palette[r*3]=this.palette[r*3+1]=this.palette[r*3+2]=0},this.update=function(){this.count=0;const r=this.size-2;for(let e=1;e<r;e++){const l=this.size2*e,o=(e-this.halfsize)/this.halfsize;for(let d=1;d<r;d++){const c=l+this.size*d,a=(d-this.halfsize)/this.halfsize;for(let u=1;u<r;u++){const g=(u-this.halfsize)/this.halfsize,f=c+u;G(g,a,o,f,this.isolation)}}}this.geometry.setDrawRange(0,this.count),p.getAttribute("position").needsUpdate=!0,p.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(p.getAttribute("uv").needsUpdate=!0),this.enableColors&&(p.getAttribute("color").needsUpdate=!0),this.count/3>_&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(t)}}const pe=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),ht=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);class ut extends Ft{constructor(t,i={}){super(t),this.isRefractor=!0,this.type="Refractor",this.camera=new Vt;const s=this,y=i.color!==void 0?new k(i.color):new k(8355711),_=i.textureWidth||512,p=i.textureHeight||512,n=i.clipBias||0,A=i.shader||ut.RefractorShader,$=i.multisample!==void 0?i.multisample:4,h=this.camera;h.matrixAutoUpdate=!1,h.userData.refractor=!0;const w=new Et,b=new $t,C=new Ut(_,p,{samples:$,type:Ot});this.material=new Rt({uniforms:Wt.clone(A.uniforms),vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,transparent:!0}),this.material.uniforms.color.value=y,this.material.uniforms.tDiffuse.value=C.texture,this.material.uniforms.textureMatrix.value=b;const V=function(){const e=new q,l=new q,o=new $t,d=new q,c=new q;return function(u){return e.setFromMatrixPosition(s.matrixWorld),l.setFromMatrixPosition(u.matrixWorld),d.subVectors(e,l),o.extractRotation(s.matrixWorld),c.set(0,0,1),c.applyMatrix4(o),d.dot(c)<0}}(),z=function(){const e=new q,l=new q,o=new Tt,d=new q;return function(){s.matrixWorld.decompose(l,o,d),e.set(0,0,1).applyQuaternion(o).normalize(),e.negate(),w.setFromNormalAndCoplanarPoint(e,l)}}(),G=function(){const e=new Et,l=new zt,o=new zt;return function(c){h.matrixWorld.copy(c.matrixWorld),h.matrixWorldInverse.copy(h.matrixWorld).invert(),h.projectionMatrix.copy(c.projectionMatrix),h.far=c.far,e.copy(w),e.applyMatrix4(h.matrixWorldInverse),l.set(e.normal.x,e.normal.y,e.normal.z,e.constant);const a=h.projectionMatrix;o.x=(Math.sign(l.x)+a.elements[8])/a.elements[0],o.y=(Math.sign(l.y)+a.elements[9])/a.elements[5],o.z=-1,o.w=(1+a.elements[10])/a.elements[14],l.multiplyScalar(2/l.dot(o)),a.elements[2]=l.x,a.elements[6]=l.y,a.elements[10]=l.z+1-n,a.elements[14]=l.w}}();function Z(e){b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(e.projectionMatrix),b.multiply(e.matrixWorldInverse),b.multiply(s.matrixWorld)}function r(e,l,o){s.visible=!1;const d=e.getRenderTarget(),c=e.xr.enabled,a=e.shadowMap.autoUpdate,u=e.outputEncoding,g=e.toneMapping;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.outputEncoding=Gt,e.toneMapping=jt,e.setRenderTarget(C),e.autoClear===!1&&e.clear(),e.render(l,h),e.xr.enabled=c,e.shadowMap.autoUpdate=a,e.outputEncoding=u,e.toneMapping=g,e.setRenderTarget(d);const f=o.viewport;f!==void 0&&e.state.viewport(f),s.visible=!0}this.onBeforeRender=function(e,l,o){o.userData.refractor!==!0&&V(o)&&(z(),Z(o),G(o),r(e,l,o))},this.getRenderTarget=function(){return C},this.dispose=function(){C.dispose(),s.material.dispose()}}}ut.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <encodings_fragment>

		}`};const ge={uniforms:{color:{value:null},time:{value:0},tDiffuse:{value:null},tDudv:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec2 vUv;
		varying vec4 vUvRefraction;

		void main() {

			vUv = uv;

			vUvRefraction = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform float time;
		uniform sampler2D tDiffuse;
		uniform sampler2D tDudv;

		varying vec2 vUv;
		varying vec4 vUvRefraction;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ),blendOverlay( base.b, blend.b ) );

		}

		void main() {

		 float waveStrength = 0.5;
		 float waveSpeed = 0.03;

			// simple distortion (ripple) via dudv map (see https://www.youtube.com/watch?v=6B7IF6GOu7s)

			vec2 distortedUv = texture2D( tDudv, vec2( vUv.x + time * waveSpeed, vUv.y ) ).rg * waveStrength;
			distortedUv = vUv.xy + vec2( distortedUv.x, distortedUv.y + time * waveSpeed );
			vec2 distortion = ( texture2D( tDudv, distortedUv ).rg * 2.0 - 1.0 ) * waveStrength;

			// new uv coords

		 vec4 uv = vec4( vUvRefraction );
		 uv.xy += distortion;

			vec4 base = texture2DProj( tDiffuse, uv );

			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

		}`};let St,K,F,Y,ct,tt,vt,Lt,W,kt,P,Dt=0,st,bt;new Yt;const Ht=new ee;Ht.getDelta();xe();pt(5,0,25,0,-Math.PI/3,0,"models/Human LowPoly.gltf");pt(-30,0,-20,0,0,0,"models/Human LowPoly.gltf");pt(-30,0,20,0,-Math.PI/3,0,"models/Human LowPoly.gltf");pt(-2,0,-15,0,Math.PI/5,0,"models/Human LowPoly.gltf");function pt(v,t,i,s,y,_,p,n=.05,A=.05,$=.05){new yt().load(p,w=>{w.scene.position.set(v,t,i),w.scene.rotation.set(s,y,_),w.scene.scale.set(n,A,$),F.add(w.scene)},w=>{console.log(w.loaded/w.total*100+"% loaded")},w=>{console.error("An error occurred while loading the GLTF model:",w)})}function xe(){St=document.getElementById("container"),K=new Vt(75,window.innerWidth/window.innerHeight,.1,200),K.position.set(20,2,0),F=new Xt,F.background=new k(16777215);const v=new Ct(1,1);st=new ut(v,{clipBias:.003,color:10066329,textureWidth:1024,textureHeight:1024,shader:ge}),st.position.set(0,0,0),st.rotateX(-Math.PI/2),F.add(st);let t;t=new Ct(5e3,5e3),bt=new ie(t,{clipBias:.002,textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio,color:7829367}),bt.rotateX(-Math.PI/2),F.add(bt);const i=new Pt().load("textures/waterdudv.jpg",function(){});i.wrapS=i.wrapT=wt,st.material.uniforms.tDudv.value=i,new yt().load("models/frame.gltf",function(p){p.scene.scale.set(.2,.2,.2),p.scene.position.set(0,0,0),p.scene.rotation.y=Math.PI*4.5,F.add(p.scene)},void 0,function(p){console.error(p)}),new yt().load("models/room.gltf",function(p){p.scene.scale.set(1,1,1),p.scene.position.set(0,.3,0),F.add(p.scene)},void 0,function(p){console.error(p)}),vt=new Jt(16777215),vt.position.set(.5,.5,1),F.add(vt),Lt=new Nt(526344),F.add(Lt),ct=me(),tt="Grass",kt=39,W=new ue(kt,ct[tt],!0,!0,1e5),W.position.set(3.6,2.75,.1),W.scale.set(5.01,2.5,3.5),W.enableUvs=!1,W.enableColors=!1,F.add(W),Y=new Kt,Y.outputEncoding=Zt,Y.setPixelRatio(window.devicePixelRatio),Y.setSize(window.innerWidth,window.innerHeight),St.appendChild(Y.domElement);const _=new Qt(K,Y.domElement);_.minDistance=.1,_.maxDistance=100,ve(),window.addEventListener("resize",fe)}function fe(){K.aspect=window.innerWidth/window.innerHeight,K.updateProjectionMatrix(),Y.setSize(window.innerWidth,window.innerHeight)}function me(){const v=new Pt().load("textures/uv_grid_opengl.png");v.wrapS=wt,v.wrapT=wt;const t="textures/cube/SwedishRoyalCastle/",i=".jpg",s=[t+"px"+i,t+"nx"+i,t+"py"+i,t+"ny"+i,t+"pz"+i,t+"nz"+i],y=new xt,_=y.load(s),p=y.load(s);p.mapping=ft;const n="textures/cube/4/",A=[n+"px"+i,n+"nx"+i,n+"py"+i,n+"ny"+i,n+"pz"+i,n+"nz"+i],$=new xt,h=$.load(A),w=$.load(A);w.mapping=ft;const b="textures/cube/1/",C=[b+"px"+i,b+"nx"+i,b+"py"+i,b+"ny"+i,b+"pz"+i,b+"nz"+i],V=new xt,z=V.load(C),G=V.load(C);return G.mapping=ft,F.background=h,F.background=new k(0),{shiny:new qt({color:50661,envMap:_,roughness:.1,metalness:1}),Ground:new ot({color:16777215,envMap:_}),Elevator:new ot({color:16777215,envMap:h}),Grass:new ot({color:16777215,envMap:z}),flat:new ot({}),painting:new dt({color:16777215,specular:1118481,shininess:1,map:v}),colors:new dt({color:16777215,specular:16777215,shininess:2,vertexColors:!0}),multiColors:new dt({shininess:2,vertexColors:!0}),plastic:new dt({specular:8947848,shininess:250})}}function ve(){const v=function(s){return function(){tt=s,W.material=ct[s],W.enableUvs=tt==="painting",W.enableColors=tt==="painting"||tt==="painting"}};P={material:"shiny",speed:1,numBlobs:10,resolution:39,isolation:80,wallx:!0,dummy:function(){}};let t;const i=new _t;i.hide(),t=i.addFolder("Materials");for(const s in ct)P[s]=v(s),t.add(P,s).name(s);t=i.addFolder("Simulation"),t.add(P,"speed",.1,8,.05),t.add(P,"numBlobs",1,50,1),t.add(P,"resolution",14,39,1),t.add(P,"isolation",10,79,1),t.add(P,"wallx")}function be(v,t,i,s,y,_,p){v.reset();const n=[new k(16711680),new k(16744192),new k(16776960),new k(65280),new k(255),new k(4915330),new k(9699539)],A=12,$=1.2/((Math.sqrt(i)-1)/4+1);for(let h=0;h<i;h++){const w=Math.sin(h+1.26*t*(1.03+.5*Math.cos(.21*h)))*.27+.5,b=Math.abs(Math.cos(h+1.12*t*Math.cos(1.22+.1424*h)))*.77,C=Math.cos(h+1.32*t*.1*Math.sin(.92+.53*h))*.27+.5;tt==="multiColors"?v.addBall(w,b,C,$,A,n[h%7]):v.addBall(w,b,C,$,A)}y&&v.addPlaneX(2,12),v.update()}function Bt(){requestAnimationFrame(Bt);const v=Ht.getDelta();Dt+=v*P.speed*.5,be(W,Dt,P.numBlobs,P.floor,P.wallx,P.wallz),Y.render(F,K),we()}function we(v){Y.render(F,K)}Bt();te(K);
//# sourceMappingURL=index2-885b1bb2.js.map
