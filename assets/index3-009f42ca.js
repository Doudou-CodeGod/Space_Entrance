import{j as U,k as ee,Y as se,_ as ne,af as ie,u as H,aC as C,a7 as O,a6 as N,a5 as I,K as oe,ab as X,ae as A,c as Y,P as re,a as ae,aD as le,W as ce,O as de,b as q,a1 as he,v as ue,D as fe,i as me,X as pe}from"./location-46e3574f.js";import{R as ge,a as be,S as we,b as ye,E as ve}from"./FocusShader-a877c0b9.js";import{B as xe}from"./BloomPass-7df4ea79.js";import{R as Fe}from"./Reflector-c529cddc.js";const je=/^[og]\s*(.+)?/,Me=/^mtllib /,Pe=/^usemtl /,Le=/^usemap /,Z=/\s+/,J=new U,G=new U,K=new U,Q=new U,x=new U,D=new ee;function Ve(){const m={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(s,e){if(this.object&&this.object.fromDeclaration===!1){this.object.name=s,this.object.fromDeclaration=e!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:s||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(t,n){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const c={index:this.materials.length,name:t||"",mtllib:Array.isArray(n)&&n.length>0?n[n.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const r={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return r.clone=this.clone.bind(r),r}};return this.materials.push(c),c},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){const n=this.currentMaterial();if(n&&n.groupEnd===-1&&(n.groupEnd=this.geometry.vertices.length/3,n.groupCount=n.groupEnd-n.groupStart,n.inherited=!1),t&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return t&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),n}},i&&i.name&&typeof i.clone=="function"){const t=i.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(s,e){const i=parseInt(s,10);return(i>=0?i-1:i+e/3)*3},parseNormalIndex:function(s,e){const i=parseInt(s,10);return(i>=0?i-1:i+e/3)*3},parseUVIndex:function(s,e){const i=parseInt(s,10);return(i>=0?i-1:i+e/2)*2},addVertex:function(s,e,i){const t=this.vertices,n=this.object.geometry.vertices;n.push(t[s+0],t[s+1],t[s+2]),n.push(t[e+0],t[e+1],t[e+2]),n.push(t[i+0],t[i+1],t[i+2])},addVertexPoint:function(s){const e=this.vertices;this.object.geometry.vertices.push(e[s+0],e[s+1],e[s+2])},addVertexLine:function(s){const e=this.vertices;this.object.geometry.vertices.push(e[s+0],e[s+1],e[s+2])},addNormal:function(s,e,i){const t=this.normals,n=this.object.geometry.normals;n.push(t[s+0],t[s+1],t[s+2]),n.push(t[e+0],t[e+1],t[e+2]),n.push(t[i+0],t[i+1],t[i+2])},addFaceNormal:function(s,e,i){const t=this.vertices,n=this.object.geometry.normals;J.fromArray(t,s),G.fromArray(t,e),K.fromArray(t,i),x.subVectors(K,G),Q.subVectors(J,G),x.cross(Q),x.normalize(),n.push(x.x,x.y,x.z),n.push(x.x,x.y,x.z),n.push(x.x,x.y,x.z)},addColor:function(s,e,i){const t=this.colors,n=this.object.geometry.colors;t[s]!==void 0&&n.push(t[s+0],t[s+1],t[s+2]),t[e]!==void 0&&n.push(t[e+0],t[e+1],t[e+2]),t[i]!==void 0&&n.push(t[i+0],t[i+1],t[i+2])},addUV:function(s,e,i){const t=this.uvs,n=this.object.geometry.uvs;n.push(t[s+0],t[s+1]),n.push(t[e+0],t[e+1]),n.push(t[i+0],t[i+1])},addDefaultUV:function(){const s=this.object.geometry.uvs;s.push(0,0),s.push(0,0),s.push(0,0)},addUVLine:function(s){const e=this.uvs;this.object.geometry.uvs.push(e[s+0],e[s+1])},addFace:function(s,e,i,t,n,o,c,l,r){const h=this.vertices.length;let a=this.parseVertexIndex(s,h),d=this.parseVertexIndex(e,h),u=this.parseVertexIndex(i,h);if(this.addVertex(a,d,u),this.addColor(a,d,u),c!==void 0&&c!==""){const p=this.normals.length;a=this.parseNormalIndex(c,p),d=this.parseNormalIndex(l,p),u=this.parseNormalIndex(r,p),this.addNormal(a,d,u)}else this.addFaceNormal(a,d,u);if(t!==void 0&&t!==""){const p=this.uvs.length;a=this.parseUVIndex(t,p),d=this.parseUVIndex(n,p),u=this.parseUVIndex(o,p),this.addUV(a,d,u),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(s){this.object.geometry.type="Points";const e=this.vertices.length;for(let i=0,t=s.length;i<t;i++){const n=this.parseVertexIndex(s[i],e);this.addVertexPoint(n),this.addColor(n)}},addLineGeometry:function(s,e){this.object.geometry.type="Line";const i=this.vertices.length,t=this.uvs.length;for(let n=0,o=s.length;n<o;n++)this.addVertexLine(this.parseVertexIndex(s[n],i));for(let n=0,o=e.length;n<o;n++)this.addUVLine(this.parseUVIndex(e[n],t))}};return m.startObject("",!1),m}class Ce extends se{constructor(s){super(s),this.materials=null}load(s,e,i,t){const n=this,o=new ne(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(s,function(c){try{e(n.parse(c))}catch(l){t?t(l):console.error(l),n.manager.itemError(s)}},i,t)}setMaterials(s){return this.materials=s,this}parse(s){const e=new Ve;s.indexOf(`\r
`)!==-1&&(s=s.replace(/\r\n/g,`
`)),s.indexOf(`\\
`)!==-1&&(s=s.replace(/\\\n/g,""));const i=s.split(`
`);let t=[];for(let c=0,l=i.length;c<l;c++){const r=i[c].trimStart();if(r.length===0)continue;const h=r.charAt(0);if(h!=="#")if(h==="v"){const a=r.split(Z);switch(a[0]){case"v":e.vertices.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])),a.length>=7?(D.setRGB(parseFloat(a[4]),parseFloat(a[5]),parseFloat(a[6])).convertSRGBToLinear(),e.colors.push(D.r,D.g,D.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));break;case"vt":e.uvs.push(parseFloat(a[1]),parseFloat(a[2]));break}}else if(h==="f"){const d=r.slice(1).trim().split(Z),u=[];for(let f=0,b=d.length;f<b;f++){const y=d[f];if(y.length>0){const v=y.split("/");u.push(v)}}const p=u[0];for(let f=1,b=u.length-1;f<b;f++){const y=u[f],v=u[f+1];e.addFace(p[0],y[0],v[0],p[1],y[1],v[1],p[2],y[2],v[2])}}else if(h==="l"){const a=r.substring(1).trim().split(" ");let d=[];const u=[];if(r.indexOf("/")===-1)d=a;else for(let p=0,f=a.length;p<f;p++){const b=a[p].split("/");b[0]!==""&&d.push(b[0]),b[1]!==""&&u.push(b[1])}e.addLineGeometry(d,u)}else if(h==="p"){const d=r.slice(1).trim().split(" ");e.addPointGeometry(d)}else if((t=je.exec(r))!==null){const a=(" "+t[0].slice(1).trim()).slice(1);e.startObject(a)}else if(Pe.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(Me.test(r))e.materialLibraries.push(r.substring(7).trim());else if(Le.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(h==="s"){if(t=r.split(" "),t.length>1){const d=t[1].trim().toLowerCase();e.object.smooth=d!=="0"&&d!=="off"}else e.object.smooth=!0;const a=e.object.currentMaterial();a&&(a.smooth=e.object.smooth)}else{if(r==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}}e.finalize();const n=new ie;if(n.materialLibraries=[].concat(e.materialLibraries),!(e.objects.length===1&&e.objects[0].geometry.vertices.length===0)===!0)for(let c=0,l=e.objects.length;c<l;c++){const r=e.objects[c],h=r.geometry,a=r.materials,d=h.type==="Line",u=h.type==="Points";let p=!1;if(h.vertices.length===0)continue;const f=new H;f.setAttribute("position",new C(h.vertices,3)),h.normals.length>0&&f.setAttribute("normal",new C(h.normals,3)),h.colors.length>0&&(p=!0,f.setAttribute("color",new C(h.colors,3))),h.hasUVIndices===!0&&f.setAttribute("uv",new C(h.uvs,2));const b=[];for(let v=0,E=a.length;v<E;v++){const P=a[v],W=P.name+"_"+P.smooth+"_"+p;let g=e.materials[W];if(this.materials!==null){if(g=this.materials.create(P.name),d&&g&&!(g instanceof O)){const L=new O;N.prototype.copy.call(L,g),L.color.copy(g.color),g=L}else if(u&&g&&!(g instanceof I)){const L=new I({size:10,sizeAttenuation:!1});N.prototype.copy.call(L,g),L.color.copy(g.color),L.map=g.map,g=L}}g===void 0&&(d?g=new O:u?g=new I({size:1,sizeAttenuation:!1}):g=new oe,g.name=P.name,g.flatShading=!P.smooth,g.vertexColors=p,e.materials[W]=g),b.push(g)}let y;if(b.length>1){for(let v=0,E=a.length;v<E;v++){const P=a[v];f.addGroup(P.groupStart,P.groupCount,v)}d?y=new X(f,b):u?y=new A(f,b):y=new Y(f,b)}else d?y=new X(f,b[0]):u?y=new A(f,b[0]):y=new Y(f,b[0]);y.name=r.name,n.add(y)}else if(e.vertices.length>0){const c=new I({size:1,sizeAttenuation:!1}),l=new H;l.setAttribute("position",new C(e.vertices,3)),e.colors.length>0&&e.colors[0]!==void 0&&(l.setAttribute("color",new C(e.colors,3)),c.vertexColors=!0);const r=new A(l,c);n.add(r)}return n}}let _,w,V,F,S,R;const k=[],T=[];let z,B;const _e=new pe;let j;ze();te();function ze(){const m=document.querySelector("#container");_=new re(60,window.innerWidth/window.innerHeight,1,5e4),_.position.set(-8e3,0,7e3),w=new ae,w.background=new ee(10000536),w.fog=new le(10000536,675e-7),_.lookAt(w.position);const s=new Ce;s.load("models/obj/male02/male02.obj",function(c){const l=$(c,"position");M(l,w,4.05,-500,-350,600,16732780),M(l,w,4.05,500,-350,0,16777215),M(l,w,4.05,-250,-350,1500,16732780),M(l,w,4.05,-250,-350,-1500,16777215)}),s.load("models/obj/female02/female02.obj",function(c){const l=$(c,"position");M(l,w,4.05,-1e3,-350,0,16732780),M(l,w,4.05,0,-350,0,16777215),M(l,w,4.05,1e3,-350,400,16732780),M(l,w,4.05,250,-350,1500,16732780),M(l,w,4.05,250,-350,2500,16777215)}),V=new ce,V.setPixelRatio(window.devicePixelRatio),V.setSize(window.innerWidth,window.innerHeight),V.autoClear=!1,m.appendChild(V.domElement),j=new de(_,V.domElement),j.enableDamping=!0,j.dampingFactor=.05,j.screenSpacePanning=!1,j.minDistance=100,j.maxDistance=5e3,j.maxPolarAngle=Math.PI/2,j.enableKeys=!0,j.keys={LEFT:65,UP:87,RIGHT:68,BOTTOM:83};let e;e=new q(5e4,5e4),R=new Fe(e,{clipBias:.002,textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio,color:7829367}),R.rotateX(-Math.PI/2),R.position.set(0,-350,0),w.add(R),S=new he,w.add(S);const i=new A(new q(15e3,15e3,64,64),new I({color:0,size:10}));i.position.y=-400,i.rotation.x=-Math.PI/2,S.add(i);const t=new ge(w,_),n=new xe(.01),o=new be(.5,.5,1900,!1);B=new we(ye),B.uniforms.screenWidth.value=window.innerWidth*window.devicePixelRatio,B.uniforms.screenHeight.value=window.innerHeight*window.devicePixelRatio,z=new ve(V),z.addPass(t),z.addPass(n),z.addPass(o),z.addPass(B)}function $(m,s){let e=0;m.traverse(function(n){if(n.isMesh){const o=n.geometry.attributes[s];e+=o.array.length}});const i=new Float32Array(e);let t=0;return m.traverse(function(n){if(n.isMesh){const o=n.geometry.attributes[s];i.set(o.array,t),t+=o.array.length}}),new ue(i,3)}function M(m,s,e,i,t,n,o){const c=new H;c.setAttribute("position",m.clone()),c.setAttribute("initialPosition",m.clone()),c.attributes.position.setUsage(fe);const l=[[6e3,0,-4e3],[5e3,0,0],[1e3,0,5e3],[1e3,0,-5e3],[4e3,0,2e3],[-4e3,0,1e3],[-5e3,0,-5e3],[0,0,0]];for(let r=0;r<l.length;r++){const h=r<l.length-1?2434341:o;F=new A(c,new I({size:40,color:h})),F.scale.x=F.scale.y=F.scale.z=e,F.position.x=i+l[r][0],F.position.y=t+l[r][1],F.position.z=n+l[r][2],S.add(F),T.push({mesh:F,speed:.5+Math.random()})}k.push({mesh:F,verticesDown:0,verticesUp:0,direction:0,speed:15,delay:Math.floor(200+200*Math.random()),start:Math.floor(100+200*Math.random())})}function te(){requestAnimationFrame(te),Ie(),j.update()}me(_);function Ie(){let m=10*_e.getDelta();m=m<2?m:2;for(let s=0;s<T.length;s++){const e=T[s];e.mesh.rotation.y+=-.1*m*e.speed}for(let s=0;s<k.length;s++){const e=k[s],i=e.mesh.geometry.attributes.position,t=e.mesh.geometry.attributes.initialPosition,n=i.count;e.start>0?e.start-=1:e.direction===0&&(e.direction=-1);for(let o=0;o<n;o++){const c=i.getX(o),l=i.getY(o),r=i.getZ(o);if(e.direction<0&&(l>0?i.setXYZ(o,c+1.5*(.5-Math.random())*e.speed*m,l+3*(.25-Math.random())*e.speed*m,r+1.5*(.5-Math.random())*e.speed*m):e.verticesDown+=1),e.direction>0){const h=t.getX(o),a=t.getY(o),d=t.getZ(o),u=Math.abs(c-h),p=Math.abs(l-a),f=Math.abs(r-d);u+p+u>1?i.setXYZ(o,c-(c-h)/u*e.speed*m*(.85-Math.random()),l-(l-a)/p*e.speed*m*(1+Math.random()),r-(r-d)/f*e.speed*m*(.85-Math.random())):e.verticesUp+=1}}e.verticesDown>=n&&(e.delay<=0?(e.direction=1,e.speed=5,e.verticesDown=0,e.delay=320):e.delay-=1),e.verticesUp>=n&&(e.delay<=0?(e.direction=-1,e.speed=15,e.verticesUp=0,e.delay=120):e.delay-=1),i.needsUpdate=!0}z.render(.01)}
//# sourceMappingURL=index3-009f42ca.js.map
