{"version":3,"file":"index3-af2efdfc.js","sources":["../../node_modules/three/examples/jsm/loaders/OBJLoader.js","../../src/space3.js"],"sourcesContent":["import {\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLineBasicMaterial,\n\tLineSegments,\n\tLoader,\n\tMaterial,\n\tMesh,\n\tMeshPhongMaterial,\n\tPoints,\n\tPointsMaterial,\n\tVector3,\n\tColor\n} from 'three';\n\n// o object_name | g group_name\nconst _object_pattern = /^[og]\\s*(.+)?/;\n// mtllib file_reference\nconst _material_library_pattern = /^mtllib /;\n// usemtl material_name\nconst _material_use_pattern = /^usemtl /;\n// usemap map_name\nconst _map_use_pattern = /^usemap /;\nconst _face_vertex_data_separator_pattern = /\\s+/;\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _ab = new Vector3();\nconst _cb = new Vector3();\n\nconst _color = new Color();\n\nfunction ParserState() {\n\n\tconst state = {\n\t\tobjects: [],\n\t\tobject: {},\n\n\t\tvertices: [],\n\t\tnormals: [],\n\t\tcolors: [],\n\t\tuvs: [],\n\n\t\tmaterials: {},\n\t\tmaterialLibraries: [],\n\n\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\tthis.object.name = name;\n\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t\tthis.object = {\n\t\t\t\tname: name || '',\n\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\tgeometry: {\n\t\t\t\t\tvertices: [],\n\t\t\t\t\tnormals: [],\n\t\t\t\t\tcolors: [],\n\t\t\t\t\tuvs: [],\n\t\t\t\t\thasUVIndices: false\n\t\t\t\t},\n\t\t\t\tmaterials: [],\n\t\t\t\tsmooth: true,\n\n\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\tconst previous = this._finalize( false );\n\n\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst material = {\n\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\tconst cloned = {\n\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\treturn material;\n\n\t\t\t\t},\n\n\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t},\n\n\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\tconst lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( let mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Inherit previous objects material.\n\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\tconst declared = previousMaterial.clone( 0 );\n\t\t\t\tdeclared.inherited = true;\n\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t}\n\n\t\t\tthis.objects.push( this.object );\n\n\t\t},\n\n\t\tfinalize: function () {\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t},\n\n\t\taddVertex: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddVertexPoint: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddVertexLine: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.normals;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\t_vA.fromArray( src, a );\n\t\t\t_vB.fromArray( src, b );\n\t\t\t_vC.fromArray( src, c );\n\n\t\t\t_cb.subVectors( _vC, _vB );\n\t\t\t_ab.subVectors( _vA, _vB );\n\t\t\t_cb.cross( _ab );\n\n\t\t\t_cb.normalize();\n\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\n\t\t},\n\n\t\taddColor: function ( a, b, c ) {\n\n\t\t\tconst src = this.colors;\n\t\t\tconst dst = this.object.geometry.colors;\n\n\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddUV: function ( a, b, c ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t},\n\n\t\taddDefaultUV: function () {\n\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\n\t\t},\n\n\t\taddUVLine: function ( a ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t},\n\n\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tlet ia = this.parseVertexIndex( a, vLen );\n\t\t\tlet ib = this.parseVertexIndex( b, vLen );\n\t\t\tlet ic = this.parseVertexIndex( c, vLen );\n\n\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t// normals\n\n\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\tconst nLen = this.normals.length;\n\n\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t} else {\n\n\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t} else {\n\n\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\tthis.addDefaultUV();\n\n\t\t\t}\n\n\t\t},\n\n\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tconst index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\tthis.addColor( index );\n\n\t\t\t}\n\n\t\t},\n\n\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\tconst vLen = this.vertices.length;\n\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t}\n\n\t\t\tfor ( let uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tstate.startObject( '', false );\n\n\treturn state;\n\n}\n\n//\n\nclass OBJLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.materials = null;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tsetMaterials( materials ) {\n\n\t\tthis.materials = materials;\n\n\t\treturn this;\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst state = new ParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet result = [];\n\n\t\tfor ( let i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tconst line = lines[ i ].trimStart();\n\n\t\t\tif ( line.length === 0 ) continue;\n\n\t\t\tconst lineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue;\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tconst data = line.split( _face_vertex_data_separator_pattern );\n\n\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t_color.setRGB(\n\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] )\n\t\t\t\t\t\t\t).convertSRGBToLinear();\n\n\t\t\t\t\t\t\tstate.colors.push( _color.r, _color.g, _color.b );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst vertexData = lineData.split( _face_vertex_data_separator_pattern );\n\t\t\t\tconst faceVertices = [];\n\n\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\tfor ( let j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst vertex = vertexData[ j ];\n\n\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\tconst vertexParts = vertex.split( '/' );\n\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\tconst v1 = faceVertices[ 0 ];\n\n\t\t\t\tfor ( let j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\tconst v2 = faceVertices[ j ];\n\t\t\t\t\tconst v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\tconst lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\tlet lineVertices = [];\n\t\t\t\tconst lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( '/' ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tconst parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst pointData = lineData.split( ' ' );\n\n\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t} else if ( ( result = _object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// let name = result[ 0 ].slice( 1 ).trim();\n\t\t\t\tconst name = ( ' ' + result[ 0 ].slice( 1 ).trim() ).slice( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( _material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( _material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( _map_use_pattern.test( line ) ) {\n\n\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\tconst value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst material = state.object.currentMaterial();\n\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tconst container = new Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tconst hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\tif ( hasPrimitives === true ) {\n\n\t\t\tfor ( let i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\tconst object = state.objects[ i ];\n\t\t\t\tconst geometry = object.geometry;\n\t\t\t\tconst materials = object.materials;\n\t\t\t\tconst isLine = ( geometry.type === 'Line' );\n\t\t\t\tconst isPoints = ( geometry.type === 'Points' );\n\t\t\t\tlet hasVertexColors = false;\n\n\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Create materials\n\n\t\t\t\tconst createdMaterials = [];\n\n\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\tconst materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\tlet material = state.materials[ materialHash ];\n\n\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialLine = new LineBasicMaterial();\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmaterial = new LineBasicMaterial();\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmaterial = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t}\n\n\t\t\t\t// Create mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = object.name;\n\n\t\t\t\tcontainer.add( mesh );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\tconst material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( state.vertices, 3 ) );\n\n\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( state.colors, 3 ) );\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst points = new Points( buffergeometry, material );\n\t\t\t\tcontainer.add( points );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\n\t}\n\n}\n\nexport { OBJLoader };\n","import * as THREE from 'three';\n\n\t\t\timport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\n\t\t\timport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\n\t\t\timport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\n\t\t\timport { BloomPass } from 'three/examples/jsm/postprocessing/BloomPass.js';\n\t\t\timport { FilmPass } from 'three/examples/jsm/postprocessing/FilmPass.js';\n\t\t\timport { FocusShader } from 'three/examples/jsm/shaders/FocusShader.js';\n\t\t\timport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\n\t\t\timport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\n\t\t\timport { Reflector } from 'three/examples/jsm/objects/Reflector.js';\n\t\t\timport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\n\t\t\timport { initKeyboardControls } from './keyboardCameraControl.js';\n\n\n\t\t\tlet camera, scene, renderer, mesh;\n\n\t\t\tlet parent;\n\t\t\tlet groundMirror;\n\n\t\t\tconst meshes = [], clonemeshes = [];\n\n\t\t\tlet composer, effectFocus;\n\n\t\t\tconst clock = new THREE.Clock();\n\n\n\n\t\t\t// Define controls variable here\nlet controls;\n\n\t\t\tinit();\n\t\t\t//addGLTFModel(5, -20, 25, 0, -Math.PI / 3, 0, 'models/Human LowPoly.gltf');\n\t\t\t//addGLTFModel(-30, 0, -20, 0, 0, 0, 'models/Human LowPoly.gltf');\n\t\t\t//addGLTFModel(-30, 0, 20, 0, -Math.PI / 3, 0, 'models/Human LowPoly.gltf');\n\t\t\t//addGLTFModel(-2, 0, -15, 0, Math.PI / 5, 0, 'models/Human LowPoly.gltf');\n\t\t\tanimate();\n\n\n\t\t\t//glt models\nfunction addGLTFModel(x, y, z, rx, ry, rz, modelPath, scaleX = 400, scaleY = 400, scaleZ = 400) {\n    const loader = new GLTFLoader();\n    loader.load(\n      modelPath,\n      (gltf) => {\n          gltf.scene.position.set(x, y, z);\n          gltf.scene.rotation.set(rx, ry, rz);\n          gltf.scene.scale.set(scaleX, scaleY, scaleZ);\n          scene.add(gltf.scene);\n        },\n        (xhr) => {\n          console.log((xhr.loaded / xhr.total) * 100 + '% loaded');\n        },\n        (error) => {\n          console.error('An error occurred while loading the GLTF model:', error);\n        }\n      );\n  }\n\n\t\t\tfunction init() {\n\n\t\t\t\tconst container = document.querySelector( '#container' );\n\n\t\t\t\tcamera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 50000 );\n\t\t\t\tcamera.position.set( -8000, 0, 7000 );\n\n\t\t\t\tscene = new THREE.Scene();\n\t\t\t\tscene.background = new THREE.Color( 0x989898 );\n\t\t\t\tscene.fog = new THREE.FogExp2( 0x989898, 0.0000675 );\n\n\t\t\t\tcamera.lookAt( scene.position );\n\n\n\t\t\t\tconst loader = new OBJLoader();\n\n\t\t\t\tloader.load( 'models/obj/male02/male02.obj', function ( object ) {\n\n\t\t\t\t\tconst positions = combineBuffer( object, 'position' );\n\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, - 500, - 350, 600, 0xFF526C );\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, 500, - 350, 0, 0xFFFFFF );\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, - 250, - 350, 1500, 0xFF526C );\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, - 250, - 350, - 1500, 0xFFFFFF );\n\n\t\t\t\t} );\n\n\t\t\t\tloader.load( 'models/obj/female02/female02.obj', function ( object ) {\n\n\t\t\t\t\tconst positions = combineBuffer( object, 'position' );\n\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, - 1000, - 350, 0, 0xFF526C );\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, 0, - 350, 0, 0xFFFFFF );\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, 1000, - 350, 400, 0xFF526C );\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, 250, - 350, 1500, 0xFF526C );\n\t\t\t\t\tcreateMesh( positions, scene, 4.05, 250, - 350, 2500, 0xFFFFFF );\n\n\t\t\t\t} );\n\n\n\t\t\t\trenderer = new THREE.WebGLRenderer();\n\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\t\t\t\trenderer.autoClear = false;\n\t\t\t\tcontainer.appendChild( renderer.domElement );\n\n// Initialize OrbitControls after the renderer is created\n  controls = new OrbitControls(camera, renderer.domElement);\n  controls.enableDamping = true;\n  controls.dampingFactor = 0.05;\n  controls.screenSpacePanning = false;\n  controls.minDistance = 100;\n  controls.maxDistance = 5000;\n  controls.maxPolarAngle = Math.PI / 2;\n\n  // Enable pan using WASD keys\n  controls.enableKeys = true;\n  controls.keys = {\n    LEFT: 65, // A\n    UP: 87, // W\n    RIGHT: 68, // D\n    BOTTOM: 83, // S\n  };\n\n  // reflectors/mirrors\n\nlet geometry;\n\ngeometry = new THREE.PlaneGeometry(50000, 50000);\ngroundMirror = new Reflector(geometry, {\nclipBias: 0.002,\ntextureWidth: window.innerWidth * window.devicePixelRatio,\ntextureHeight: window.innerHeight * window.devicePixelRatio,\ncolor: 0x777777,\n});\n\ngroundMirror.rotateX( - Math.PI / 2 );\ngroundMirror.position.set(0, -350, 0);\nscene.add( groundMirror );\n\n\t\t\t\tparent = new THREE.Object3D();\n\t\t\t\tscene.add( parent );\n\n\t\t\t\tconst grid = new THREE.Points( new THREE.PlaneGeometry( 15000, 15000, 64, 64 ), new THREE.PointsMaterial( { color: 0x000000, size: 10 } ) );\n\t\t\t\tgrid.position.y = - 400;\n\t\t\t\tgrid.rotation.x = - Math.PI / 2;\n\t\t\t\tparent.add( grid );\n\n\t\t\t\t// postprocessing\n\n\t\t\t\tconst renderModel = new RenderPass( scene, camera );\n\t\t\t\tconst effectBloom = new BloomPass( 0.01 );\n\t\t\t\tconst effectFilm = new FilmPass( 0.5, 0.5, 1900, false );\n\n\t\t\t\teffectFocus = new ShaderPass( FocusShader );\n\n\t\t\t\teffectFocus.uniforms[ 'screenWidth' ].value = window.innerWidth * window.devicePixelRatio;\n\t\t\t\teffectFocus.uniforms[ 'screenHeight' ].value = window.innerHeight * window.devicePixelRatio;\n\n\t\t\t\tcomposer = new EffectComposer( renderer );\n\n\t\t\t\tcomposer.addPass( renderModel );\n\t\t\t\tcomposer.addPass( effectBloom );\n\t\t\t\tcomposer.addPass( effectFilm );\n\t\t\t\tcomposer.addPass( effectFocus );\n\n\n\n\t\t\t}\n\n\n\t\t\tfunction onWindowResize() {\n\n\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\t\tcamera.lookAt( scene.position );\n\n\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\t\t\t\tcomposer.setSize( window.innerWidth, window.innerHeight );\n\n\t\t\t\teffectFocus.uniforms[ 'screenWidth' ].value = window.innerWidth * window.devicePixelRatio;\n\t\t\t\teffectFocus.uniforms[ 'screenHeight' ].value = window.innerHeight * window.devicePixelRatio;\n\n\t\t\t}\n\n\t\t\tfunction combineBuffer( model, bufferName ) {\n\n\t\t\t\tlet count = 0;\n\n\t\t\t\tmodel.traverse( function ( child ) {\n\n\t\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\t\tconst buffer = child.geometry.attributes[ bufferName ];\n\n\t\t\t\t\t\tcount += buffer.array.length;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tconst combined = new Float32Array( count );\n\n\t\t\t\tlet offset = 0;\n\n\t\t\t\tmodel.traverse( function ( child ) {\n\n\t\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\t\tconst buffer = child.geometry.attributes[ bufferName ];\n\n\t\t\t\t\t\tcombined.set( buffer.array, offset );\n\t\t\t\t\t\toffset += buffer.array.length;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn new THREE.BufferAttribute( combined, 3 );\n\n\t\t\t}\n\n\t\t\tfunction createMesh( positions, scene, scale, x, y, z, color ) {\n\n\t\t\t\tconst geometry = new THREE.BufferGeometry();\n\t\t\t\tgeometry.setAttribute( 'position', positions.clone() );\n\t\t\t\tgeometry.setAttribute( 'initialPosition', positions.clone() );\n\n\t\t\t\tgeometry.attributes.position.setUsage( THREE.DynamicDrawUsage );\n\n\t\t\t\tconst clones = [\n\n\t\t\t\t\t[ 6000, 0, - 4000 ],\n\t\t\t\t\t[ 5000, 0, 0 ],\n\t\t\t\t\t[ 1000, 0, 5000 ],\n\t\t\t\t\t[ 1000, 0, - 5000 ],\n\t\t\t\t\t[ 4000, 0, 2000 ],\n\t\t\t\t\t[ - 4000, 0, 1000 ],\n\t\t\t\t\t[ - 5000, 0, - 5000 ],\n\n\t\t\t\t\t[ 0, 0, 0 ]\n\n\t\t\t\t];\n\n\t\t\t\tfor ( let i = 0; i < clones.length; i ++ ) {\n\n\t\t\t\t\tconst c = ( i < clones.length - 1 ) ? 0x252525 : color;\n\n\t\t\t\t\tmesh = new THREE.Points( geometry, new THREE.PointsMaterial( { size: 40, color: c } ) );\n\t\t\t\t\tmesh.scale.x = mesh.scale.y = mesh.scale.z = scale;\n\n\t\t\t\t\tmesh.position.x = x + clones[ i ][ 0 ];\n\t\t\t\t\tmesh.position.y = y + clones[ i ][ 1 ];\n\t\t\t\t\tmesh.position.z = z + clones[ i ][ 2 ];\n\n\t\t\t\t\tparent.add( mesh );\n\n\t\t\t\t\tclonemeshes.push( { mesh: mesh, speed: 0.5 + Math.random() } );\n\n\t\t\t\t}\n\n\t\t\t\tmeshes.push( {\n\t\t\t\t\tmesh: mesh, verticesDown: 0, verticesUp: 0, direction: 0, speed: 15, delay: Math.floor( 200 + 200 * Math.random() ),\n\t\t\t\t\tstart: Math.floor( 100 + 200 * Math.random() ),\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfunction animate() {\n\t\t\t\trequestAnimationFrame(animate);\n\t\t\t\trender();\n\n\t\t\t\tcontrols.update();\n\t\t\t  }\n\n\n\t\t\tinitKeyboardControls(camera);\n\n\t\t\tfunction render() {\n\n\t\t\t\tlet delta = 10 * clock.getDelta();\n\n\t\t\t\tdelta = delta < 2 ? delta : 2;\n\n\t\t\t\t//parent.rotation.y += - 0.02 * delta;\n\n\t\t\t\tfor ( let j = 0; j < clonemeshes.length; j ++ ) {\n\n\t\t\t\t\tconst cm = clonemeshes[ j ];\n\t\t\t\t\tcm.mesh.rotation.y += - 0.1 * delta * cm.speed;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0; j < meshes.length; j ++ ) {\n\n\t\t\t\t\tconst data = meshes[ j ];\n\t\t\t\t\tconst positions = data.mesh.geometry.attributes.position;\n\t\t\t\t\tconst initialPositions = data.mesh.geometry.attributes.initialPosition;\n\n\t\t\t\t\tconst count = positions.count;\n\n\t\t\t\t\tif ( data.start > 0 ) {\n\n\t\t\t\t\t\tdata.start -= 1;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( data.direction === 0 ) {\n\n\t\t\t\t\t\t\tdata.direction = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\tconst px = positions.getX( i );\n\t\t\t\t\t\tconst py = positions.getY( i );\n\t\t\t\t\t\tconst pz = positions.getZ( i );\n\n\t\t\t\t\t\t// falling down\n\t\t\t\t\t\tif ( data.direction < 0 ) {\n\n\t\t\t\t\t\t\tif ( py > 0 ) {\n\n\t\t\t\t\t\t\t\tpositions.setXYZ(\n\t\t\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\t\t\tpx + 1.5 * ( 0.50 - Math.random() ) * data.speed * delta,\n\t\t\t\t\t\t\t\t\tpy + 3.0 * ( 0.25 - Math.random() ) * data.speed * delta,\n\t\t\t\t\t\t\t\t\tpz + 1.5 * ( 0.50 - Math.random() ) * data.speed * delta\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdata.verticesDown += 1;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// rising up\n\t\t\t\t\t\tif ( data.direction > 0 ) {\n\n\t\t\t\t\t\t\tconst ix = initialPositions.getX( i );\n\t\t\t\t\t\t\tconst iy = initialPositions.getY( i );\n\t\t\t\t\t\t\tconst iz = initialPositions.getZ( i );\n\n\t\t\t\t\t\t\tconst dx = Math.abs( px - ix );\n\t\t\t\t\t\t\tconst dy = Math.abs( py - iy );\n\t\t\t\t\t\t\tconst dz = Math.abs( pz - iz );\n\n\t\t\t\t\t\t\tconst d = dx + dy + dx;\n\n\t\t\t\t\t\t\tif ( d > 1 ) {\n\n\t\t\t\t\t\t\t\tpositions.setXYZ(\n\t\t\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\t\t\tpx - ( px - ix ) / dx * data.speed * delta * ( 0.85 - Math.random() ),\n\t\t\t\t\t\t\t\t\tpy - ( py - iy ) / dy * data.speed * delta * ( 1 + Math.random() ),\n\t\t\t\t\t\t\t\t\tpz - ( pz - iz ) / dz * data.speed * delta * ( 0.85 - Math.random() )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdata.verticesUp += 1;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// all vertices down\n\t\t\t\t\tif ( data.verticesDown >= count ) {\n\n\t\t\t\t\t\tif ( data.delay <= 0 ) {\n\n\t\t\t\t\t\t\tdata.direction = 1;\n\t\t\t\t\t\t\tdata.speed = 5;\n\t\t\t\t\t\t\tdata.verticesDown = 0;\n\t\t\t\t\t\t\tdata.delay = 320;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdata.delay -= 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// all vertices up\n\t\t\t\t\tif ( data.verticesUp >= count ) {\n\n\t\t\t\t\t\tif ( data.delay <= 0 ) {\n\n\t\t\t\t\t\t\tdata.direction = - 1;\n\t\t\t\t\t\t\tdata.speed = 15;\n\t\t\t\t\t\t\tdata.verticesUp = 0;\n\t\t\t\t\t\t\tdata.delay = 120;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdata.delay -= 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpositions.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tcomposer.render( 0.01 );\n\n\t\t\t}\n"],"names":["_object_pattern","_material_library_pattern","_material_use_pattern","_map_use_pattern","_face_vertex_data_separator_pattern","_vA","Vector3","_vB","_vC","_ab","_cb","_color","Color","ParserState","state","name","fromDeclaration","previousMaterial","libraries","previous","material","index","cloned","end","lastMultiMaterial","mi","declared","value","len","a","b","c","src","dst","ua","ub","uc","na","nb","nc","vLen","ia","ib","ic","nLen","uvLen","vertices","vi","l","uvs","uvi","OBJLoader","Loader","manager","url","onLoad","onProgress","onError","scope","loader","FileLoader","text","e","materials","lines","result","i","line","lineFirstChar","data","vertexData","faceVertices","j","jl","vertex","vertexParts","v1","v2","v3","lineParts","lineVertices","lineUVs","li","llen","parts","pointData","container","Group","object","geometry","isLine","isPoints","hasVertexColors","buffergeometry","BufferGeometry","Float32BufferAttribute","createdMaterials","miLen","sourceMaterial","materialHash","LineBasicMaterial","materialLine","Material","PointsMaterial","materialPoints","MeshPhongMaterial","mesh","LineSegments","Points","Mesh","points","camera","scene","renderer","parent","groundMirror","meshes","clonemeshes","composer","effectFocus","clock","THREE.Clock","controls","init","animate","THREE.PerspectiveCamera","THREE.Scene","THREE.Color","THREE.FogExp2","positions","combineBuffer","createMesh","THREE.WebGLRenderer","OrbitControls","THREE.PlaneGeometry","Reflector","THREE.Object3D","grid","THREE.Points","THREE.PointsMaterial","renderModel","RenderPass","effectBloom","BloomPass","effectFilm","FilmPass","ShaderPass","FocusShader","EffectComposer","model","bufferName","count","child","buffer","combined","offset","THREE.BufferAttribute","scale","x","y","z","color","THREE.BufferGeometry","THREE.DynamicDrawUsage","clones","render","initKeyboardControls","delta","cm","initialPositions","px","py","pz","ix","iy","iz","dx","dy","dz"],"mappings":"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"}