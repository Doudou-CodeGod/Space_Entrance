import{g as Ot,D as jt,G as dt,H as ct,p as k,b as Rt,r as Lt,s as kt,t as Yt,I as Xt,S as Jt,U as Nt,o as Q,Q as Kt,v as Dt,J as Zt,N as Qt,V as Wt,a as qt,f as Ft,T as Tt,l as Mt,K as te,X as ee,W as ie,Y as ne,O as se,Z as wt,_ as At,$ as re,a0 as ht,a1 as ut,R as ae,c as oe,d as le,e as de,E as ce,a2 as he}from"./location-66c52b81.js";import{G as $t}from"./GLTFLoader-5c6959e5.js";import{R as ue}from"./Reflector-4aa37466.js";import{B as pe}from"./BloomPass-8b78561f.js";/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class G{constructor(t,n,s,A,E="div"){this.parent=t,this.object=n,this.property=s,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(A),this.$name=document.createElement("div"),this.$name.classList.add("name"),G.nextNameID=G.nextNameID||0,this.$name.id="lil-gui-name-"+ ++G.nextNameID,this.$widget=document.createElement(E),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(s)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const n=this.parent.add(this.object,this.property,t);return n.name(this._name),this.destroy(),n}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class ge extends G{constructor(t,n,s){super(t,n,s,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Ct(f){let t,n;return(t=f.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=f.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=f.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!n&&"#"+n}const fe={isPrimitive:!0,match:f=>typeof f=="string",fromHexString:Ct,toHexString:Ct},lt={isPrimitive:!0,match:f=>typeof f=="number",fromHexString:f=>parseInt(f.substring(1),16),toHexString:f=>"#"+f.toString(16).padStart(6,0)},xe={isPrimitive:!1,match:Array.isArray,fromHexString(f,t,n=1){const s=lt.fromHexString(f);t[0]=(s>>16&255)/255*n,t[1]=(s>>8&255)/255*n,t[2]=(255&s)/255*n},toHexString:([f,t,n],s=1)=>lt.toHexString(f*(s=255/s)<<16^t*s<<8^n*s<<0)},me={isPrimitive:!1,match:f=>Object(f)===f,fromHexString(f,t,n=1){const s=lt.fromHexString(f);t.r=(s>>16&255)/255*n,t.g=(s>>8&255)/255*n,t.b=(255&s)/255*n},toHexString:({r:f,g:t,b:n},s=1)=>lt.toHexString(f*(s=255/s)<<16^t*s<<8^n*s<<0)},ve=[fe,lt,xe,me];class be extends G{constructor(t,n,s,A){var E;super(t,n,s,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(E=this.initialValue,ve.find(h=>h.match(E))),this._rgbScale=A,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const h=Ct(this.$text.value);h&&this._setValueFromHexString(h)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const n=this._format.fromHexString(t);this.setValue(n)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class yt extends G{constructor(t,n,s){super(t,n,s,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",A=>{A.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class we extends G{constructor(t,n,s,A,E,h){super(t,n,s,"number"),this._initInput(),this.min(A),this.max(E);const i=h!==void 0;this.step(i?h:this._getImplicitStep(),i),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,n=!0){return this._step=t,this._stepExplicit=n,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let n=(t-this._min)/(this._max-this._min);n=Math.max(0,Math.min(n,1)),this.$fill.style.width=100*n+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=u=>{const p=parseFloat(this.$input.value);isNaN(p)||(this._snapClampSetValue(p+u),this.$input.value=this.getValue())};let n,s,A,E,h,i=!1;const y=u=>{if(i){const p=u.clientX-n,w=u.clientY-s;Math.abs(w)>5?(u.preventDefault(),this.$input.blur(),i=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(p)>5&&M()}if(!i){const p=u.clientY-A;h-=p*this._step*this._arrowKeyMultiplier(u),E+h>this._max?h=this._max-E:E+h<this._min&&(h=this._min-E),this._snapClampSetValue(E+h)}A=u.clientY},M=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",M)};this.$input.addEventListener("input",()=>{let u=parseFloat(this.$input.value);isNaN(u)||(this._stepExplicit&&(u=this._snap(u)),this.setValue(this._clamp(u)))}),this.$input.addEventListener("keydown",u=>{u.code==="Enter"&&this.$input.blur(),u.code==="ArrowUp"&&(u.preventDefault(),t(this._step*this._arrowKeyMultiplier(u))),u.code==="ArrowDown"&&(u.preventDefault(),t(this._step*this._arrowKeyMultiplier(u)*-1))}),this.$input.addEventListener("wheel",u=>{this._inputFocused&&(u.preventDefault(),t(this._step*this._normalizeMouseWheel(u)))},{passive:!1}),this.$input.addEventListener("mousedown",u=>{n=u.clientX,s=A=u.clientY,i=!0,E=this.getValue(),h=0,window.addEventListener("mousemove",y),window.addEventListener("mouseup",M)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=w=>{const C=this.$slider.getBoundingClientRect();let D=($=w,B=C.left,K=C.right,r=this._min,e=this._max,($-B)/(K-B)*(e-r)+r);var $,B,K,r,e;this._snapClampSetValue(D)},n=w=>{t(w.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",s)};let A,E,h=!1;const i=w=>{w.preventDefault(),this._setDraggingStyle(!0),t(w.touches[0].clientX),h=!1},y=w=>{if(h){const C=w.touches[0].clientX-A,D=w.touches[0].clientY-E;Math.abs(C)>Math.abs(D)?i(w):(window.removeEventListener("touchmove",y),window.removeEventListener("touchend",M))}else w.preventDefault(),t(w.touches[0].clientX)},M=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",y),window.removeEventListener("touchend",M)},u=this._callOnFinishChange.bind(this);let p;this.$slider.addEventListener("mousedown",w=>{this._setDraggingStyle(!0),t(w.clientX),window.addEventListener("mousemove",n),window.addEventListener("mouseup",s)}),this.$slider.addEventListener("touchstart",w=>{w.touches.length>1||(this._hasScrollBar?(A=w.touches[0].clientX,E=w.touches[0].clientY,h=!0):i(w),window.addEventListener("touchmove",y,{passive:!1}),window.addEventListener("touchend",M))},{passive:!1}),this.$slider.addEventListener("wheel",w=>{if(Math.abs(w.deltaX)<Math.abs(w.deltaY)&&this._hasScrollBar)return;w.preventDefault();const C=this._normalizeMouseWheel(w)*this._step;this._snapClampSetValue(this.getValue()+C),this.$input.value=this.getValue(),clearTimeout(p),p=setTimeout(u,400)},{passive:!1})}_setDraggingStyle(t,n="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle("lil-gui-"+n,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:n,deltaY:s}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(n=0,s=-t.wheelDelta/120,s*=this._stepExplicit?1:10),n+-s}_arrowKeyMultiplier(t){let n=this._stepExplicit?1:10;return t.shiftKey?n*=10:t.altKey&&(n/=10),n}_snap(t){const n=Math.round(t/this._step)*this._step;return parseFloat(n.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class Ae extends G{constructor(t,n,s,A){super(t,n,s,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(A)?A:Object.values(A),this._names=Array.isArray(A)?A:Object.keys(A),this._names.forEach(E=>{const h=document.createElement("option");h.innerHTML=E,this.$select.appendChild(h)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const t=this.getValue(),n=this._values.indexOf(t);return this.$select.selectedIndex=n,this.$display.innerHTML=n===-1?t:this._names[n],this}}class ye extends G{constructor(t,n,s){super(t,n,s,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",A=>{A.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let Pt=!1;class zt{constructor({parent:t,autoPlace:n=t===void 0,container:s,width:A,title:E="Controls",injectStyles:h=!0,touchStyles:i=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",y=>{y.code!=="Enter"&&y.code!=="Space"||(y.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(E),i&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!Pt&&h&&(function(y){const M=document.createElement("style");M.innerHTML=y;const u=document.querySelector("head link[rel=stylesheet], head style");u?document.head.insertBefore(M,u):document.head.appendChild(M)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"↕";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"▾";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"▸"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"✓";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),Pt=!0),s?s.appendChild(this.domElement):n&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),A&&this.domElement.style.setProperty("--width",A+"px"),this.domElement.addEventListener("keydown",y=>y.stopPropagation()),this.domElement.addEventListener("keyup",y=>y.stopPropagation())}add(t,n,s,A,E){if(Object(s)===s)return new Ae(this,t,n,s);const h=t[n];switch(typeof h){case"number":return new we(this,t,n,s,A,E);case"boolean":return new ge(this,t,n);case"string":return new ye(this,t,n);case"function":return new yt(this,t,n)}console.error(`gui.add failed
	property:`,n,`
	object:`,t,`
	value:`,h)}addColor(t,n,s=1){return new be(this,t,n,s)}addFolder(t){return new zt({parent:this,title:t})}load(t,n=!0){return t.controllers&&this.controllers.forEach(s=>{s instanceof yt||s._name in t.controllers&&s.load(t.controllers[s._name])}),n&&t.folders&&this.folders.forEach(s=>{s._title in t.folders&&s.load(t.folders[s._title])}),this}save(t=!0){const n={controllers:{},folders:{}};return this.controllers.forEach(s=>{if(!(s instanceof yt)){if(s._name in n.controllers)throw new Error(`Cannot save GUI with duplicate property "${s._name}"`);n.controllers[s._name]=s.save()}}),t&&this.folders.forEach(s=>{if(s._title in n.folders)throw new Error(`Cannot save GUI with duplicate folder "${s._title}"`);n.folders[s._title]=s.save()}),n}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const n=this.$children.clientHeight;this.$children.style.height=n+"px",this.domElement.classList.add("transition");const s=E=>{E.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",s))};this.$children.addEventListener("transitionend",s);const A=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=A+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(n=>n.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(n=>{t=t.concat(n.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(n=>{t=t.concat(n.foldersRecursive())}),t}}class _e extends Ot{constructor(t,n,s=!1,A=!1,E=1e4){const h=new jt;super(h,n),this.isMarchingCubes=!0;const i=this,y=new Float32Array(12*3),M=new Float32Array(12*3),u=new Float32Array(12*3);this.enableUvs=s,this.enableColors=A,this.init=function(r){this.resolution=r,this.isolation=80,this.size=r,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const e=E*3;this.positionArray=new Float32Array(e*3);const o=new dt(this.positionArray,3);o.setUsage(ct),h.setAttribute("position",o),this.normalArray=new Float32Array(e*3);const l=new dt(this.normalArray,3);if(l.setUsage(ct),h.setAttribute("normal",l),this.enableUvs){this.uvArray=new Float32Array(e*2);const d=new dt(this.uvArray,2);d.setUsage(ct),h.setAttribute("uv",d)}if(this.enableColors){this.colorArray=new Float32Array(e*3);const d=new dt(this.colorArray,3);d.setUsage(ct),h.setAttribute("color",d)}};function p(r,e,o){return r+(e-r)*o}function w(r,e,o,l,d,c,a,g,x,v){const m=(o-a)/(g-a),b=i.normal_cache;y[e+0]=l+m*i.delta,y[e+1]=d,y[e+2]=c,M[e+0]=p(b[r+0],b[r+3],m),M[e+1]=p(b[r+1],b[r+4],m),M[e+2]=p(b[r+2],b[r+5],m),u[e+0]=p(i.palette[x*3+0],i.palette[v*3+0],m),u[e+1]=p(i.palette[x*3+1],i.palette[v*3+1],m),u[e+2]=p(i.palette[x*3+2],i.palette[v*3+2],m)}function C(r,e,o,l,d,c,a,g,x,v){const m=(o-a)/(g-a),b=i.normal_cache;y[e+0]=l,y[e+1]=d+m*i.delta,y[e+2]=c;const _=r+i.yd*3;M[e+0]=p(b[r+0],b[_+0],m),M[e+1]=p(b[r+1],b[_+1],m),M[e+2]=p(b[r+2],b[_+2],m),u[e+0]=p(i.palette[x*3+0],i.palette[v*3+0],m),u[e+1]=p(i.palette[x*3+1],i.palette[v*3+1],m),u[e+2]=p(i.palette[x*3+2],i.palette[v*3+2],m)}function D(r,e,o,l,d,c,a,g,x,v){const m=(o-a)/(g-a),b=i.normal_cache;y[e+0]=l,y[e+1]=d,y[e+2]=c+m*i.delta;const _=r+i.zd*3;M[e+0]=p(b[r+0],b[_+0],m),M[e+1]=p(b[r+1],b[_+1],m),M[e+2]=p(b[r+2],b[_+2],m),u[e+0]=p(i.palette[x*3+0],i.palette[v*3+0],m),u[e+1]=p(i.palette[x*3+1],i.palette[v*3+1],m),u[e+2]=p(i.palette[x*3+2],i.palette[v*3+2],m)}function $(r){const e=r*3;i.normal_cache[e]===0&&(i.normal_cache[e+0]=i.field[r-1]-i.field[r+1],i.normal_cache[e+1]=i.field[r-i.yd]-i.field[r+i.yd],i.normal_cache[e+2]=i.field[r-i.zd]-i.field[r+i.zd])}function B(r,e,o,l,d){const c=l+1,a=l+i.yd,g=l+i.zd,x=c+i.yd,v=c+i.zd,m=l+i.yd+i.zd,b=c+i.yd+i.zd;let _=0;const z=i.field[l],L=i.field[c],H=i.field[a],I=i.field[x],O=i.field[g],R=i.field[v],F=i.field[m],U=i.field[b];z<d&&(_|=1),L<d&&(_|=2),H<d&&(_|=8),I<d&&(_|=4),O<d&&(_|=16),R<d&&(_|=32),F<d&&(_|=128),U<d&&(_|=64);const S=Ee[_];if(S===0)return 0;const j=i.delta,Z=r+j,X=e+j,J=o+j;S&1&&($(l),$(c),w(l*3,0,d,r,e,o,z,L,l,c)),S&2&&($(c),$(x),C(c*3,3,d,Z,e,o,L,I,c,x)),S&4&&($(a),$(x),w(a*3,6,d,r,X,o,H,I,a,x)),S&8&&($(l),$(a),C(l*3,9,d,r,e,o,z,H,l,a)),S&16&&($(g),$(v),w(g*3,12,d,r,e,J,O,R,g,v)),S&32&&($(v),$(b),C(v*3,15,d,Z,e,J,R,U,v,b)),S&64&&($(m),$(b),w(m*3,18,d,r,X,J,F,U,m,b)),S&128&&($(g),$(m),C(g*3,21,d,r,e,J,O,F,g,m)),S&256&&($(l),$(g),D(l*3,24,d,r,e,o,z,O,l,g)),S&512&&($(c),$(v),D(c*3,27,d,Z,e,o,L,R,c,v)),S&1024&&($(x),$(b),D(x*3,30,d,Z,X,o,I,U,x,b)),S&2048&&($(a),$(m),D(a*3,33,d,r,X,o,H,F,a,m)),_<<=4;let N,st,rt,et=0,W=0;for(;pt[_+W]!=-1;)N=_+W,st=N+1,rt=N+2,K(y,M,u,3*pt[N],3*pt[st],3*pt[rt]),W+=3,et++;return et}function K(r,e,o,l,d,c){const a=i.count*3;if(i.positionArray[a+0]=r[l],i.positionArray[a+1]=r[l+1],i.positionArray[a+2]=r[l+2],i.positionArray[a+3]=r[d],i.positionArray[a+4]=r[d+1],i.positionArray[a+5]=r[d+2],i.positionArray[a+6]=r[c],i.positionArray[a+7]=r[c+1],i.positionArray[a+8]=r[c+2],i.material.flatShading===!0){const g=(e[l+0]+e[d+0]+e[c+0])/3,x=(e[l+1]+e[d+1]+e[c+1])/3,v=(e[l+2]+e[d+2]+e[c+2])/3;i.normalArray[a+0]=g,i.normalArray[a+1]=x,i.normalArray[a+2]=v,i.normalArray[a+3]=g,i.normalArray[a+4]=x,i.normalArray[a+5]=v,i.normalArray[a+6]=g,i.normalArray[a+7]=x,i.normalArray[a+8]=v}else i.normalArray[a+0]=e[l+0],i.normalArray[a+1]=e[l+1],i.normalArray[a+2]=e[l+2],i.normalArray[a+3]=e[d+0],i.normalArray[a+4]=e[d+1],i.normalArray[a+5]=e[d+2],i.normalArray[a+6]=e[c+0],i.normalArray[a+7]=e[c+1],i.normalArray[a+8]=e[c+2];if(i.enableUvs){const g=i.count*2;i.uvArray[g+0]=r[l+0],i.uvArray[g+1]=r[l+2],i.uvArray[g+2]=r[d+0],i.uvArray[g+3]=r[d+2],i.uvArray[g+4]=r[c+0],i.uvArray[g+5]=r[c+2]}i.enableColors&&(i.colorArray[a+0]=o[l+0],i.colorArray[a+1]=o[l+1],i.colorArray[a+2]=o[l+2],i.colorArray[a+3]=o[d+0],i.colorArray[a+4]=o[d+1],i.colorArray[a+5]=o[d+2],i.colorArray[a+6]=o[c+0],i.colorArray[a+7]=o[c+1],i.colorArray[a+8]=o[c+2]),i.count+=3}this.addBall=function(r,e,o,l,d,c){const a=Math.sign(l);l=Math.abs(l);const g=c!=null;let x=new k(r,e,o);if(g)try{x=c instanceof k?c:Array.isArray(c)?new k(Math.min(Math.abs(c[0]),1),Math.min(Math.abs(c[1]),1),Math.min(Math.abs(c[2]),1)):new k(c)}catch{x=new k(r,e,o)}const v=this.size*Math.sqrt(l/d),m=o*this.size,b=e*this.size,_=r*this.size;let z=Math.floor(m-v);z<1&&(z=1);let L=Math.floor(m+v);L>this.size-1&&(L=this.size-1);let H=Math.floor(b-v);H<1&&(H=1);let I=Math.floor(b+v);I>this.size-1&&(I=this.size-1);let O=Math.floor(_-v);O<1&&(O=1);let R=Math.floor(_+v);R>this.size-1&&(R=this.size-1);let F,U,S,j,Z,X,J,N,st,rt,et;for(S=z;S<L;S++)for(Z=this.size2*S,N=S/this.size-o,st=N*N,U=H;U<I;U++)for(j=Z+this.size*U,J=U/this.size-e,rt=J*J,F=O;F<R;F++)if(X=F/this.size-r,et=l/(1e-6+X*X+rt+st)-d,et>0){this.field[j+F]+=et*a;const W=Math.sqrt((F-_)*(F-_)+(U-b)*(U-b)+(S-m)*(S-m))/v,bt=1-W*W*W*(W*(W*6-15)+10);this.palette[(j+F)*3+0]+=x.r*bt,this.palette[(j+F)*3+1]+=x.g*bt,this.palette[(j+F)*3+2]+=x.b*bt}},this.addPlaneX=function(r,e){const o=this.size,l=this.yd,d=this.zd,c=this.field;let a,g,x,v,m,b,_,z=o*Math.sqrt(r/e);for(z>o&&(z=o),a=0;a<z;a++)if(b=a/o,v=b*b,m=r/(1e-4+v)-e,m>0)for(g=0;g<o;g++)for(_=a+g*l,x=0;x<o;x++)c[d*x+_]+=m},this.addPlaneY=function(r,e){const o=this.size,l=this.yd,d=this.zd,c=this.field;let a,g,x,v,m,b,_,z,L=o*Math.sqrt(r/e);for(L>o&&(L=o),g=0;g<L;g++)if(b=g/o,v=b*b,m=r/(1e-4+v)-e,m>0)for(_=g*l,a=0;a<o;a++)for(z=_+a,x=0;x<o;x++)c[d*x+z]+=m},this.addPlaneZ=function(r,e){const o=this.size,l=this.yd,d=this.zd,c=this.field;let a,g,x,v,m,b,_,z,L=o*Math.sqrt(r/e);for(L>o&&(L=o),x=0;x<L;x++)if(b=x/o,v=b*b,m=r/(1e-4+v)-e,m>0)for(_=d*x,g=0;g<o;g++)for(z=_+g*l,a=0;a<o;a++)c[z+a]+=m},this.setCell=function(r,e,o,l){const d=this.size2*o+this.size*e+r;this.field[d]=l},this.getCell=function(r,e,o){const l=this.size2*o+this.size*e+r;return this.field[l]},this.blur=function(r=1){const e=this.field,o=e.slice(),l=this.size,d=this.size2;for(let c=0;c<l;c++)for(let a=0;a<l;a++)for(let g=0;g<l;g++){const x=d*g+l*a+c;let v=o[x],m=1;for(let b=-1;b<=1;b+=2){const _=b+c;if(!(_<0||_>=l))for(let z=-1;z<=1;z+=2){const L=z+a;if(!(L<0||L>=l))for(let H=-1;H<=1;H+=2){const I=H+g;if(I<0||I>=l)continue;const O=d*I+l*L+_,R=o[O];m++,v+=r*(R-v)/m}}}e[x]=v}},this.reset=function(){for(let r=0;r<this.size3;r++)this.normal_cache[r*3]=0,this.field[r]=0,this.palette[r*3]=this.palette[r*3+1]=this.palette[r*3+2]=0},this.update=function(){this.count=0;const r=this.size-2;for(let e=1;e<r;e++){const o=this.size2*e,l=(e-this.halfsize)/this.halfsize;for(let d=1;d<r;d++){const c=o+this.size*d,a=(d-this.halfsize)/this.halfsize;for(let g=1;g<r;g++){const x=(g-this.halfsize)/this.halfsize,v=c+g;B(x,a,l,v,this.isolation)}}}this.geometry.setDrawRange(0,this.count),h.getAttribute("position").needsUpdate=!0,h.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(h.getAttribute("uv").needsUpdate=!0),this.enableColors&&(h.getAttribute("color").needsUpdate=!0),this.count/3>E&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(t)}}const Ee=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),pt=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);class xt extends Ot{constructor(t,n={}){super(t),this.isRefractor=!0,this.type="Refractor",this.camera=new Rt;const s=this,A=n.color!==void 0?new k(n.color):new k(8355711),E=n.textureWidth||512,h=n.textureHeight||512,i=n.clipBias||0,y=n.shader||xt.RefractorShader,M=n.multisample!==void 0?n.multisample:4,u=this.camera;u.matrixAutoUpdate=!1,u.userData.refractor=!0;const p=new Lt,w=new kt,C=new Yt(E,h,{samples:M,type:Xt});this.material=new Jt({uniforms:Nt.clone(y.uniforms),vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,transparent:!0}),this.material.uniforms.color.value=A,this.material.uniforms.tDiffuse.value=C.texture,this.material.uniforms.textureMatrix.value=w;const D=function(){const e=new Q,o=new Q,l=new kt,d=new Q,c=new Q;return function(g){return e.setFromMatrixPosition(s.matrixWorld),o.setFromMatrixPosition(g.matrixWorld),d.subVectors(e,o),l.extractRotation(s.matrixWorld),c.set(0,0,1),c.applyMatrix4(l),d.dot(c)<0}}(),$=function(){const e=new Q,o=new Q,l=new Kt,d=new Q;return function(){s.matrixWorld.decompose(o,l,d),e.set(0,0,1).applyQuaternion(l).normalize(),e.negate(),p.setFromNormalAndCoplanarPoint(e,o)}}(),B=function(){const e=new Lt,o=new Dt,l=new Dt;return function(c){u.matrixWorld.copy(c.matrixWorld),u.matrixWorldInverse.copy(u.matrixWorld).invert(),u.projectionMatrix.copy(c.projectionMatrix),u.far=c.far,e.copy(p),e.applyMatrix4(u.matrixWorldInverse),o.set(e.normal.x,e.normal.y,e.normal.z,e.constant);const a=u.projectionMatrix;l.x=(Math.sign(o.x)+a.elements[8])/a.elements[0],l.y=(Math.sign(o.y)+a.elements[9])/a.elements[5],l.z=-1,l.w=(1+a.elements[10])/a.elements[14],o.multiplyScalar(2/o.dot(l)),a.elements[2]=o.x,a.elements[6]=o.y,a.elements[10]=o.z+1-i,a.elements[14]=o.w}}();function K(e){w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(e.projectionMatrix),w.multiply(e.matrixWorldInverse),w.multiply(s.matrixWorld)}function r(e,o,l){s.visible=!1;const d=e.getRenderTarget(),c=e.xr.enabled,a=e.shadowMap.autoUpdate,g=e.outputEncoding,x=e.toneMapping;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.outputEncoding=Zt,e.toneMapping=Qt,e.setRenderTarget(C),e.autoClear===!1&&e.clear(),e.render(o,u),e.xr.enabled=c,e.shadowMap.autoUpdate=a,e.outputEncoding=g,e.toneMapping=x,e.setRenderTarget(d);const v=l.viewport;v!==void 0&&e.state.viewport(v),s.visible=!0}this.onBeforeRender=function(e,o,l){l.userData.refractor!==!0&&D(l)&&($(),K(l),B(l),r(e,o,l))},this.getRenderTarget=function(){return C},this.dispose=function(){C.dispose(),s.material.dispose()}}}xt.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <encodings_fragment>

		}`};const Me={uniforms:{color:{value:null},time:{value:0},tDiffuse:{value:null},tDudv:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec2 vUv;
		varying vec4 vUvRefraction;

		void main() {

			vUv = uv;

			vUvRefraction = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform float time;
		uniform sampler2D tDiffuse;
		uniform sampler2D tDudv;

		varying vec2 vUv;
		varying vec4 vUvRefraction;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ),blendOverlay( base.b, blend.b ) );

		}

		void main() {

		 float waveStrength = 0.5;
		 float waveSpeed = 0.03;

			// simple distortion (ripple) via dudv map (see https://www.youtube.com/watch?v=6B7IF6GOu7s)

			vec2 distortedUv = texture2D( tDudv, vec2( vUv.x + time * waveSpeed, vUv.y ) ).rg * waveStrength;
			distortedUv = vUv.xy + vec2( distortedUv.x, distortedUv.y + time * waveSpeed );
			vec2 distortion = ( texture2D( tDudv, distortedUv ).rg * 2.0 - 1.0 ) * waveStrength;

			// new uv coords

		 vec4 uv = vec4( vUvRefraction );
		 uv.xy += distortion;

			vec4 base = texture2DProj( tDiffuse, uv );

			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

		}`};let Vt,q,V,Y,gt,it,_t,Bt,T,Ht,P,It=0,at,Et,Ut=new Wt,ot=10,tt=!1,ft=!1,nt,mt;const Gt=new he,$e=Gt.getDelta();Ce();Le();vt(5,0,25,0,-Math.PI/3,0,"models/Human LowPoly.gltf");vt(-30,0,-20,0,0,0,"models/Human LowPoly.gltf");vt(-30,0,20,0,-Math.PI/3,0,"models/Human LowPoly.gltf");vt(-2,0,-15,0,Math.PI/5,0,"models/Human LowPoly.gltf");St();function vt(f,t,n,s,A,E,h,i=.05,y=.05,M=.05){new $t().load(h,p=>{p.scene.position.set(f,t,n),p.scene.rotation.set(s,A,E),p.scene.scale.set(i,y,M),V.add(p.scene)},p=>{console.log(p.loaded/p.total*100+"% loaded")},p=>{console.error("An error occurred while loading the GLTF model:",p)})}function Ce(){Vt=document.getElementById("container"),q=new Rt(75,window.innerWidth/window.innerHeight,.1,200),q.position.set(20,2,0),V=new qt,V.background=new k(16777215);const f=new Ft(1,1);at=new xt(f,{clipBias:.003,color:10066329,textureWidth:1024,textureHeight:1024,shader:Me}),at.position.set(0,0,0),at.rotateX(-Math.PI/2),V.add(at);let t;t=new Ft(5e3,5e3),Et=new ue(t,{clipBias:.002,textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio,color:7829367}),Et.rotateX(-Math.PI/2),V.add(Et);const n=new Tt().load("textures/waterdudv.jpg",function(){St()});n.wrapS=n.wrapT=Mt,at.material.uniforms.tDudv.value=n,new $t().load("models/frame.gltf",function(h){h.scene.scale.set(.2,.2,.2),h.scene.position.set(0,0,0),h.scene.rotation.y=Math.PI*4.5,V.add(h.scene)},void 0,function(h){console.error(h)}),new $t().load("models/room.gltf",function(h){h.scene.scale.set(1,1,1),h.scene.position.set(0,.3,0),V.add(h.scene)},void 0,function(h){console.error(h)}),_t=new te(16777215),_t.position.set(.5,.5,1),V.add(_t),Bt=new ee(526344),V.add(Bt),gt=Se(),it="Grass",Ht=39,T=new _e(Ht,gt[it],!0,!0,1e5),T.position.set(3.6,2.75,.1),T.scale.set(5.01,2.5,3.5),T.enableUvs=!1,T.enableColors=!1,V.add(T),Y=new ie,Y.outputEncoding=ne,Y.setPixelRatio(window.devicePixelRatio),Y.setSize(window.innerWidth,window.innerHeight),Vt.appendChild(Y.domElement);const E=new se(q,Y.domElement);E.minDistance=.1,E.maxDistance=100,window.addEventListener("resize",ze),window.addEventListener("mousemove",Ve,!1),window.addEventListener("mousedown",Be,!1),window.addEventListener("mouseup",He,!1)}function ze(){q.aspect=window.innerWidth/window.innerHeight,q.updateProjectionMatrix(),Y.setSize(window.innerWidth,window.innerHeight)}function Se(){const f="textures/cube/SwedishRoyalCastle/",t=".jpg",n=[f+"px"+t,f+"nx"+t,f+"py"+t,f+"ny"+t,f+"pz"+t,f+"nz"+t],s=new wt,A=s.load(n),E=s.load(n);E.mapping=At;const h="textures/cube/4/",i=[h+"px"+t,h+"nx"+t,h+"py"+t,h+"ny"+t,h+"pz"+t,h+"nz"+t],y=new wt,M=y.load(i),u=y.load(i);u.mapping=At;const p="textures/cube/1/",w=[p+"px"+t,p+"nx"+t,p+"py"+t,p+"ny"+t,p+"pz"+t,p+"nz"+t],C=new wt,D=C.load(w),$=C.load(w);$.mapping=At,V.background=M,V.background=new k(0);const B=new Tt().load("textures/2.png");return B.wrapS=Mt,B.wrapT=Mt,B.enableUvs=!0,{shiny:new re({color:50661,envMap:A,roughness:.1,metalness:1}),Ground:new ht({color:16777215,envMap:A}),Elevator:new ht({color:16777215,envMap:M}),Grass:new ht({color:16777215,envMap:D}),flat:new ht({}),painting:new ut({color:16777215,specular:1118481,shininess:1,map:B}),colors:new ut({color:16777215,specular:16777215,shininess:2,vertexColors:!0}),multiColors:new ut({shininess:2,vertexColors:!0}),plastic:new ut({specular:8947848,shininess:250})}}function Le(){const f=function(s){return function(){it=s,T.material=gt[s],T.enableUvs=!0,T.enableColors=it==="colors"||it==="multiColors"}};P={material:"shiny",speed:1,numBlobs:10,resolution:39,isolation:80,wallx:!0,dummy:function(){}};let t;const n=new zt;n.hide(),t=n.addFolder("Materials");for(const s in gt)P[s]=f(s),t.add(P,s).name(s);t=n.addFolder("Simulation"),t.add(P,"speed",.1,8,.05),t.add(P,"numBlobs",1,50,1).onChange(function(s){ot=s}),t.add(P,"resolution",14,39,1),t.add(P,"isolation",10,79,1),t.add(P,"wallx")}const ke=new ae(V,q),De=new pe(.75),Fe=new oe(.5,.5,1448,!1);mt=new le(de);mt.uniforms.screenWidth.value=window.innerWidth*window.devicePixelRatio;mt.uniforms.screenHeight.value=window.innerHeight*window.devicePixelRatio;nt=new ce(Y);nt.addPass(ke);nt.addPass(De);nt.addPass(Fe);nt.addPass(mt);function Pe(f,t,n,s,A,E,h){f.reset();let i=0;tt&&!ft&&(i+=1),ft=tt,n+=i,n=Math.min(n,50);const y=[new k(16711680),new k(16744192),new k(16776960),new k(65280),new k(255),new k(4915330),new k(9699539)],M=12,u=1.2/((Math.sqrt(n)-1)/4+1);for(let p=0;p<n;p++){const w=Math.sin(p+1.26*t*(1.03+.5*Math.cos(.21*p)))*.27+.5,C=Math.abs(Math.cos(p+1.12*t*Math.cos(1.22+.1424*p)))*.77,D=Math.cos(p+1.32*t*.1*Math.sin(.92+.53*p))*.27+.5;it==="multiColors"?f.addBall(w,C,D,u,M,y[p%7]):f.addBall(w,C,D,u,M)}A&&f.addPlaneX(2,12),f.update()}function Ve(f){const t=new Wt(f.clientX,f.clientY),n=t.distanceTo(Ut);P.speed=Math.min(Math.max(n/100,.1),8),Ut=t}function Be(){tt=!0}function He(){tt=!1}function St(){requestAnimationFrame(St),tt&&!ft?ot+=1:tt||(ot=Math.max(ot-.1,10)),ft=tt,P.numBlobs=Math.round(ot);const f=Gt.getDelta();It+=f*P.speed*.5,Pe(T,It,P.numBlobs,P.floor,P.wallx,P.wallz),Y.render(V,q),Ie()}function Ie(){nt.render($e)}
//# sourceMappingURL=index2-0847dd97.js.map
